(function(e){function t(t){for(var n,i,c=t[0],o=t[1],u=t[2],p=0,f=[];p<c.length;p++)i=c[p],a[i]&&f.push(a[i][0]),a[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,c=1;c<r.length;c++){var o=r[c];0!==a[o]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/MuCritic_App/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"034f":function(e,t,r){"use strict";var n=r("64a9"),a=r.n(n);a.a},"0703":function(e,t,r){"use strict";var n=r("d412"),a=r.n(n);a.a},"0ec3":function(e,t,r){},1:function(e,t){},10:function(e,t){},"10d6":function(e,t,r){"use strict";var n=r("243a"),a=r.n(n);a.a},11:function(e,t){},2:function(e,t){},"20e9":function(e,t,r){},"243a":function(e,t,r){},3:function(e,t){},"31a5":function(e,t,r){"use strict";var n=r("c5f7"),a=r.n(n);a.a},"357c":function(e,t,r){},4:function(e,t){},4228:function(e,t,r){},4403:function(e,t,r){"use strict";var n=r("65ab"),a=r.n(n);a.a},"46ce":function(e,t,r){},5:function(e,t){},6:function(e,t){},"64a9":function(e,t,r){},"65ab":function(e,t,r){},"664a":function(e,t,r){"use strict";var n=r("a83e"),a=r.n(n);a.a},"6dcf":function(e,t,r){"use strict";var n=r("799b"),a=r.n(n);a.a},"6f39":function(e,t,r){"use strict";var n=r("0ec3"),a=r.n(n);a.a},7:function(e,t){},"74a9":function(e,t,r){"use strict";var n=r("46ce"),a=r.n(n);a.a},"786d":function(e,t,r){"use strict";var n=r("f234"),a=r.n(n);a.a},"799b":function(e,t,r){},8:function(e,t){},8285:function(e,t,r){},"89f3":function(e,t,r){"use strict";var n=r("c93f"),a=r.n(n);a.a},9:function(e,t){},a83e:function(e,t,r){},c5f7:function(e,t,r){},c93f:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Nav"),r("router-view")],1)},s=[],i=r("d225"),c=r("308d"),o=r("6bb5"),u=r("4e2b"),l=r("9ab4"),p=r("60a3"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"nav-container"},[r("router-link",{attrs:{to:"/"}},[e._v("\n        Learn Your Taste\n    ")]),r("router-link",{attrs:{to:"/about"}},[e._v("\n        How it Works\n    ")]),r("a",{attrs:{href:"https://michaeldarr.github.io/#/contact"}},[e._v("Get In Touch")]),r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic"}},[e._v("Source Code")])],1)},d=[],m=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);m=l["a"]([Object(p["a"])({})],m);var b=m,h=b,v=(r("6f39"),r("2877")),g=Object(v["a"])(h,f,d,!1,null,"28f56b8c",null),y=g.exports,O=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(n["a"]);O=l["a"]([Object(p["a"])({components:{Nav:y}})],O);var j,w=O,_=w,k=(r("034f"),Object(v["a"])(_,a,s,!1,null,null,null)),A=k.exports,R=r("8c4f"),x=r("2f62");(function(e){e["all"]="https://michaeldarr.github.io/MuCritic_App/album_data.csv",e["noMetal"]="https://michaeldarr.github.io/MuCritic_App/album_data_no_metal.csv"})(j||(j={}));r("c5f6"),r("28a5"),r("96cf");var E=r("3b8d"),S=r("0b53"),C=r("30dc"),M=r.n(C),P={fetch:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,e.next=3,new Promise(function(e,t){M()(n.albumFile,function(r,n,a){null!=r?t(new Error("album data failed to load: ".concat(r))):e(a)})});case 3:a=e.sent,s=a.split("\n"),s.shift(),i=s.map(function(e){var t=e.split(",");return{spotifyId:t[0],popularity:Number(t[1]),rymRating:Number(t[2]),releaseYear:Number(t[3]),encoding:[Number(t[4]),Number(t[5]),Number(t[6]),Number(t[7]),Number(t[8]),Number(t[9]),Number(t[10]),Number(t[11]),Number(t[12]),Number(t[13]),Number(t[14]),Number(t[15]),Number(t[16]),Number(t[17]),Number(t[18]),Number(t[19])],userScore:null,userScoreAdjusted:null,imageUrl:null,spotifyUrl:null,name:null,artist:null}}),r("setAlbums",i);case 8:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),rate:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,s,i,c,o,u,l,p,f,d,m,b;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,n=t.rootState,a=t.state,null!=n.tasteModel&&null!=n.tasteModelAdjusted){e.next=3;break}throw new Error("Tried to rate albums before model creation");case 3:if(null!=a.albums){e.next=5;break}throw new Error("No albums to rate");case 5:return s=n.tasteModel,i=n.tasteModelAdjusted,c=a.albums,o=c.map(function(e){return e.encoding}),u=S["f"](o,[o.length,16]),l=s.predict(u),e.next=13,l.array();case 13:return p=e.sent,f=p.map(function(e){return 2*(4.5*e[0]+.5)}),d=i.predict(u),e.next=18,d.array();case 18:m=e.sent,b=m.map(function(e){return e[0]}),r("setScores",{scores:f,scoresAdjusted:b});case 21:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()};r("55dd"),r("7f7f"),r("ac6a");function T(e){return null==e.userScoreAdjusted||null==e.userScore?-1:Math.sqrt(e.userScore)/40+e.userScoreAdjusted}var D={setAlbums:function(e,t){e.albums=t,e.filteredAlbums=t},setPopularity:function(e,t){e.popularity=t},setScores:function(e,t){t.scores.forEach(function(t,r){e.albums[r].userScore=t}),t.scoresAdjusted.forEach(function(t,r){e.albums[r].userScoreAdjusted=t})},setAlbumFile:function(e,t){e.albumFile=t},setReception:function(e,t){e.reception=t},setReleaseDecade:function(e,t){e.releaseDecade=t},setSortOrder:function(e,t){e.sortOrder=t},setSpotifyInfo:function(e,t){t.spotifyAlbums.forEach(function(r,n){var a=500,s={height:819,url:"https://i.imgur.com/otLb7Vf.png",width:819};r.images.forEach(function(e){("https://i.imgur.com/otLb7Vf.png"===s.url||Math.abs(s.width)-a>Math.abs(e.width-a))&&(s=e)}),e.filteredAlbums[n+t.start].imageUrl=s.url,e.filteredAlbums[n+t.start].spotifyUrl=r.external_urls.spotify,e.filteredAlbums[n+t.start].name=r.name,e.filteredAlbums[n+t.start].artist=r.artists[0].name})},sort:function(e){var t=e.popularity,r=e.reception,n=e.releaseDecade,a=e.sortOrder,s=e.albums;switch(r){case"Respected":s=s.filter(function(e){return e.rymRating>4});break;case"Average":s=s.filter(function(e){return e.rymRating<=4&&e.rymRating>2.7});break;case"Poor":s=s.filter(function(e){return e.rymRating<=2.7});break;default:}switch(n){case"New":s=s.filter(function(e){return e.releaseYear>=2e3});break;case"Medium":s=s.filter(function(e){return e.releaseYear<2e3&&e.releaseYear>=1980});break;case"Old":s=s.filter(function(e){return e.releaseYear<1980});break;default:}switch(t){case"Popular":s=s.filter(function(e){return e.popularity>=40});break;case"Average":s=s.filter(function(e){return e.popularity<40&&e.popularity>=20});break;case"Niche":s=s.filter(function(e){return e.popularity<20});break;default:}e.filteredAlbums=s.sort(function(e,t){switch(a){case"Hate":return T(e)-T(t);case"Love":return T(t)-T(e);default:return-1}})}},$={albums:function(e){return e.albums},albumFile:function(e){return e.albumFile},filteredAlbums:function(e){return e.filteredAlbums},popularity:function(e){return e.popularity},releaseDecade:function(e){return e.releaseDecade},reception:function(e){return e.reception},sortOrder:function(e){return e.sortOrder},loaded:function(e){return 0!==e.albums.length},scored:function(e){return 0!==e.albums.length&&null!=e.albums[0].userScore}},N={albums:[],filteredAlbums:[],sortOrder:"Love",reception:"All",releaseDecade:"All",popularity:"All",albumFile:j.noMetal},I=!0,F={namespaced:I,state:N,actions:P,getters:$,mutations:D},L=(r("5df3"),r("b0b4")),q=r("768b"),G=(r("673e"),function(){function e(){Object(i["a"])(this,e),this.artistEncoderInstance={model:null,path:"models/artistEncoder/model.json"},this.favoriteArtistsEncoderInstance={model:null,path:"models/favoriteArtistsEncoder/model.json"},this.tasteMapperInstance={model:null,path:"models/taste/model.json"},this.trackEncoderInstance={model:null,path:"models/trackEncoder/model.json"},this.trackSequenceEncoderInstance={model:null,path:"models/trackSequenceEncoder/model.json"}}return Object(L["a"])(e,[{key:"artistEncoder",value:function(){return e.loadModel(this.artistEncoderInstance)}},{key:"favoriteArtistsEncoder",value:function(){return e.loadModel(this.favoriteArtistsEncoderInstance)}},{key:"tasteMapper",value:function(){return e.loadModel(this.tasteMapperInstance)}},{key:"trackEncoder",value:function(){return e.loadModel(this.trackEncoderInstance)}},{key:"trackSequenceEncoder",value:function(){return e.loadModel(this.trackSequenceEncoderInstance)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"loadModel",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.model){e.next=4;break}return e.next=3,S["b"](t.path);case 3:t.model=e.sent;case 4:return e.abrupt("return",t.model);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),U=function(){function e(){Object(i["a"])(this,e)}return Object(L["a"])(e,null,[{key:"artist",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=G.getInstance(),e.next=3,r.artistEncoder();case 3:return n=e.sent,a=S["e"](t).as2D(1,33),s=n.predict(a),e.next=8,s.array();case 8:return i=e.sent,e.abrupt("return",i[0]);case 10:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"taste",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,s,i,c,o,u,l,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length<5)){e.next=2;break}throw new Error("taste encoder must be passed 5 artists");case 2:return r=G.getInstance(),e.next=5,r.favoriteArtistsEncoder();case 5:return n=e.sent,e.next=8,r.tasteMapper();case 8:return a=e.sent,s=S["e"](t.slice(0,5)).as3D(1,5,16),i=n.predict(s),c=a.predict(i),c=c.reshape([16,1]),o=S["f"]([[-.2658042312],[-.2918781042],[.4476911426],[.035458602],[.1686497927],[.2152237296],[-.4066027105],[.1940803975],[.0597865917],[.4049637318],[-.0558041073],[-.2366468459],[.0106893238],[-.4115174115],[.1501134783],[-.2174658924]]),u=S["d"](c,o),l=S["c"](),l.add(S["a"].dense({inputShape:[16],name:"perceptron",units:1,useBias:!1,weights:[c]})),p=S["c"](),p.add(S["a"].dense({inputShape:[16],name:"perceptron",units:1,useBias:!1,weights:[u]})),e.abrupt("return",{model:l,adjustedModel:p});case 20:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"track",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,i,c,o,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=[r.acousticness,r.danceability,t.duration_ms/6e5,r.energy,t.explicit?1:0,r.instrumentalness,r.liveness,Math.max(-1*r.loudness+10,0)/70,r.mode,t.popularity/100,r.speechiness,r.tempo/200,r.time_signature/8,t.track_number/10,r.valence],a=G.getInstance(),e.next=4,a.trackEncoder();case 4:return s=e.sent,i=S["e"](n).as2D(1,15),c=s.predict(i),e.next=9,c.array();case 9:return o=e.sent,u=Object(q["a"])(o,1),l=u[0],e.abrupt("return",l);case 13:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"trackSequence",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=G.getInstance(),e.next=3,n.trackSequenceEncoder();case 3:return a=e.sent,s=S["e"](t).as3D(1,5,13),i=a.predict(s),e.next=8,i.array();case 8:return c=e.sent,e.abrupt("return",[r/100].concat(c[0]));case 10:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),B=function(){function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;Object(i["a"])(this,e),this.spotifyId=t,this.artistPopularity=r,this.spotifyApi=n,this.trackCount=a,this.encodedTracks=[]}return Object(L["a"])(e,[{key:"encodeArtist",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.artistAggregation){e.next=2;break}throw new Error("Cannot encode null artist");case 2:return e.next=4,U.artist(this.artistAggregation);case 4:this.encodedArtist=e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"encodeTrackSequence",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(5===this.encodedTracks.length){e.next=2;break}throw new Error("track sequence encoder found ".concat(this.encodedTracks.length," tracks (should be 5)"));case 2:return e.next=4,U.trackSequence(this.encodedTracks,this.artistPopularity);case 4:this.artistAggregation=e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"encodeTracks",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.spotifyResponse&&null!=this.spotifyFeaturesResponse){e.next=2;break}throw new Error("Tried to encode track before receiving all info");case 2:return e.next=4,Promise.all(this.spotifyResponse.tracks.map(function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.spotifyFeaturesResponse){e.next=2;break}throw new Error("Tried to encode track before receiving all info");case 2:return e.abrupt("return",U.track(r,t.spotifyFeaturesResponse.audio_features[n]));case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 4:this.encodedTracks=e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestTracks",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.spotifyApi.getArtistTopTracks(this.spotifyId);case 2:if(this.spotifyResponse=e.sent,!(this.spotifyResponse.tracks.length<this.trackCount)){e.next=5;break}throw new Error("Artist scraper found less than ".concat(this.trackCount," top tracks"));case 5:return this.spotifyResponse.tracks=this.spotifyResponse.tracks.slice(0,this.trackCount),t=this.spotifyResponse.tracks.map(function(e){return e.id}),e.next=9,this.spotifyApi.getBatch(t,"audio-features");case 9:this.spotifyFeaturesResponse=e.sent;case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getEncodedArtist",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.requestTracks();case 2:return e.next=4,this.encodeTracks();case 4:return e.next=6,this.encodeTrackSequence();case 6:return e.next=8,this.encodeArtist();case 8:if(null!=this.encodedArtist){e.next=10;break}throw new Error("Failed to encode artist: ".concat(this.spotifyId));case 10:return e.abrupt("return",this.encodedArtist);case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Y={encode:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.state,s=t.rootGetters,i=s["spotify/api"],null!=i){e.next=4;break}throw new Error("cannot encode artists, Spotify API is uninitiailized");case 4:return e.next=6,Promise.all(a[r].map(function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=new B(t.id,t.popularity,i),e.abrupt("return",r.getEncodedArtist());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 6:c=e.sent,n("setEncodings",{encodedArtists:c,timeRange:r});case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),learnTaste:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,a=n[n.bucket].slice(0,5),s=a.map(function(e){var t=e.encoded;if(null==t)throw new Error("Tried to learn taste from unencoded artist.");return t}),e.next=5,U.taste(s);case 5:i=e.sent,r("setTasteModels",i,{root:!0});case 7:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},W=(r("8e6e"),r("456d"),r("bd86"));function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(r,!0).forEach(function(t){Object(W["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var z,J={setArtists:function(e,t){var r=t.artists.map(function(e){return H({encoded:null},e)});e[t.bucket]=r},setEncodings:function(e,t){t.encodedArtists.forEach(function(r,n){e[t.timeRange][n].encoded=r})},setBucket:function(e,t){e.bucket=t}},Q={loaded:function(e){return{short:e.short.length>0,medium:e.medium.length>0,long:e.long.length>0}},encoded:function(e){var t={short:!1,medium:!1,long:!1};return e.short.length>0&&null!=e.short[0].encoded&&(t.short=!0),e.medium.length>0&&null!=e.medium[0].encoded&&(t.medium=!0),e.long.length>0&&null!=e.long[0].encoded&&(t.long=!0),t},bucket:function(e){return e.bucket},short:function(e){return e.short},medium:function(e){return e.medium},long:function(e){return e.long}},Z={short:[],medium:[],long:[],bucket:"medium"},K=!0,X={namespaced:K,state:Z,actions:Y,getters:Q,mutations:J},ee={api:function(e){return e.api},authUrl:function(e){var t=e.baseUrl;return t+="?client_id=".concat(e.clientId),t+="&response_type=".concat(e.responseType),t+="&redirect_uri=".concat(e.redirectUri),t+="&scope=".concat(e.scope),t}};(function(e){e["short"]="short_term",e["medium"]="medium_term",e["long"]="long_term"})(z||(z={}));r("ee1d");var te=function(){function e(t,r){Object(i["a"])(this,e);var n="",a=0,s=t.substring(1).split("&");if(s.forEach(function(e){var t=e.split("=");if(2===t.length){var s=Object(q["a"])(t,2),i=s[0],c=s[1];switch(i){case"access_token":n=c;break;case"expires_in":if(Number.isNaN(Number(c)))throw new Error("expiration value non-numeric: ".concat(c));a=Number(c);break;case"token_type":if("Bearer"!==c)throw new Error("non-Bearer token recieved: ".concat(c));break;default:r("miscLog",{location:"Spotify token retrieval",message:"unexpected parameter receieved:\n".concat(i,": ").concat(c)})}}}),null==n||""===n)throw new Error("failed to retrieve access token");if(null==a||0===a)throw new Error("failed to retrieve access token expiration");this.accessToken=n,this.expirationTimestamp=Date.now()+1e3*a}return Object(L["a"])(e,[{key:"getAlbumTracks",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:50,n="https://api.spotify.com/v1/albums/".concat(t,"/tracks?limit=").concat(r),e.abrupt("return",this.spotifyRequest(n,"GET"));case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getArtist",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="https://api.spotify.com/v1/artists/".concat(t),e.abrupt("return",this.spotifyRequest(r,"GET"));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getArtistTopTracks",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"US",n="https://api.spotify.com/v1/artists/".concat(t,"/top-tracks?country=").concat(r),e.abrupt("return",this.spotifyRequest(n,"GET"));case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBatch",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t.join(","):t,a="https://api.spotify.com/v1/".concat(r,"?ids=").concat(n),e.abrupt("return",this.spotifyRequest(a,"GET"));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getGenreSeeds",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="https://api.spotify.com/v1/recommendations/available-genre-seeds",e.abrupt("return",this.spotifyRequest(t,"GET"));case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getTrackAudioFeatures",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="https://api.spotify.com/v1/audio-features/".concat(t),e.abrupt("return",this.spotifyRequest(r,"GET"));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserTopMusic",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,s,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"medium_term",n=i.length>2&&void 0!==i[2]?i[2]:20,a=i.length>3&&void 0!==i[3]?i[3]:0,s="https://api.spotify.com/v1/me/top/".concat(t,"?limit=").concat(n,"&offset=").concat(a,"&time_range=").concat(r),e.abrupt("return",this.spotifyRequest(s,"GET"));case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,r,n){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="https://api.spotify.com/v1/search?q=".concat(t,"&type=").concat(r,"&limit=").concat(n),e.abrupt("return",this.spotifyRequest(a,"GET"));case 2:case"end":return e.stop()}},e,this)}));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"spotifyRequest",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,r){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(Date.now()>this.expirationTimestamp)){e.next=2;break}throw new Error("Spotify Token Expired");case 2:return e.abrupt("return",new Promise(function(e,a){var s={url:t,method:r,json:!0,headers:{Authorization:"Bearer ".concat(n.accessToken)}};M()(s,function(s,i,c){if(null!=s)a(new Error("request failed for ".concat(t,": ").concat(s)));else if(null==c)a(new Error("request failed for ".concat(t,": body was null")));else if(null!=c.error&&429===c.error.status){var o=n;setTimeout(function(){e(o.spotifyRequest(t,r))},1e3*i.headers["Retry-After"])}else e(c)})}));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),re={initializeApi:function(e,t){var r=e.commit;try{var n=new te(t,r);r("storeApi",n)}catch(a){r("logError",{location:"Spotify token retrieval",message:a})}},requestArtists:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.dispatch,s=t.state,null==s.api){e.next=7;break}return e.next=4,s.api.getUserTopMusic("artists",z[r],5,0);case 4:i=e.sent,n("artists/setArtists",{artists:i.items,bucket:r},{root:!0}),a("artists/encode",r,{root:!0});case 7:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestAlbums:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,s,i,c,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.state,s=t.rootGetters,null==a.api){e.next=8;break}return i=s["albums/filteredAlbums"],c=i.slice(r.start,r.start+r.count).map(function(e){return e.spotifyId}),e.next=6,a.api.getBatch(c,"albums");case 6:o=e.sent,n("albums/setSpotifyInfo",{start:r.start,spotifyAlbums:o.albums},{root:!0});case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},ne={storeApi:function(e,t){e.api=t}},ae={baseUrl:"https://accounts.spotify.com/authorize",clientId:"a01304edb42448d1aa31c3b255400130",redirectUri:"https://michaeldarr.github.io/MuCritic_App/",responseType:"token",scope:"user-top-read",api:null},se=!0,ie={namespaced:se,state:ae,getters:ee,actions:re,mutations:ne};n["a"].use(x["b"]);var ce={state:{errorLog:[],miscLog:[],tasteModel:null,tasteModelAdjusted:null},modules:{albums:F,artists:X,spotify:ie},mutations:{logError:function(e,t){e.errorLog.push(t)},logMisc:function(e,t){e.miscLog.push(t)},setTasteModels:function(e,t){e.tasteModel=t.model,e.tasteModelAdjusted=t.adjustedModel}}},oe=new x["b"].Store(ce),ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.apiIsLoaded?r("div",[r("Recommend")],1):r("div",[r("Greeting"),r("SpotifyLogin")],1)},le=[],pe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},fe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[r("i",[e._v("μ")]),e._v("Critic\n    ")]),r("p",{staticClass:"credit-line"},[e._v("\n        by Michael Darr\n    ")]),r("h2",{staticClass:"subheadding"},[r("span",{staticClass:"sub-1"},[e._v("\n            learning your music taste with\n        ")]),r("br"),r("span",{staticClass:"sub-2"},[e._v("\n            deep neural networks\n        ")])])])}],de=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);de=l["a"]([Object(p["a"])({})],de);var me=de,be=me,he=(r("31a5"),Object(v["a"])(be,pe,fe,!1,null,"69115038",null)),ve=he.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("SmallLogo"),e.loading?r("Loading",{attrs:{status:e.status}}):r("div",[r("ArtistGallery"),r("AlbumGallery",{attrs:{albums:e.albums}})],1)],1)},ye=[],Oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"albums"},[r("h1",[e._v("Recommendations")]),r("AlbumFilters"),r("div",{staticClass:"album-display-container"},e._l(e.albums,function(e){return r("AlbumDisplay",{key:e.spotifyId,attrs:{album:e}})}),1),r("div",{staticClass:"loading-more-albums-animation"},[r("LoadingAnimation")],1)],1)},je=[],we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"album-container-outer"},[r("div",{staticClass:"album-container-inner"},[r("a",{staticClass:"album-art-link",attrs:{href:e.album.spotifyUrl}},[r("div",{staticClass:"album-art",style:{"background-image":"url("+e.album.imageUrl+")"}})]),r("p",{staticClass:"album-name"},[e._v("\n            "+e._s(e.album.name)+"\n        ")]),r("p",{staticClass:"artist-name"},[e._v("\n            "+e._s(e.album.artist)+"\n        ")])])])},_e=[],ke=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(n["a"]);l["a"]([Object(p["b"])()],ke.prototype,"album",void 0),ke=l["a"]([Object(p["a"])({})],ke);var Ae=ke,Re=Ae,xe=(r("786d"),Object(v["a"])(Re,we,_e,!1,null,"c1652774",null)),Ee=xe.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"filter-container"},[r("div",{staticClass:"select-label-pair top-three"},[r("label",{attrs:{for:"sort-order"}},[e._v("Music You'll")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.sortOrder,expression:"sortOrder"}],attrs:{id:"sort-order"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.sortOrder=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"Love"}},[e._v("\n                    Love\n                ")]),r("option",{attrs:{value:"Hate"}},[e._v("\n                    Hate\n                ")])])])]),r("div",{staticClass:"select-label-pair top-three"},[r("label",{attrs:{for:"popularity"}},[e._v("Popularity")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.popularity,expression:"popularity"}],attrs:{id:"popularity"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.popularity=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"All"}},[e._v("\n                    All\n                ")]),r("option",{attrs:{value:"Popular"}},[e._v("\n                    Popular\n                ")]),r("option",{attrs:{value:"Average"}},[e._v("\n                    Average\n                ")]),r("option",{attrs:{value:"Niche"}},[e._v("\n                    Niche\n                ")])])])]),r("div",{staticClass:"select-label-pair top-three"},[r("label",{attrs:{for:"excluded-genre"}},[e._v("Exclude")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.albumFile,expression:"albumFile"}],attrs:{id:"excluded-genres"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.albumFile=t.target.multiple?r:r[0]}}},[r("option",{domProps:{value:e.albumFileAll}},[e._v("\n                    None\n                ")]),r("option",{domProps:{value:e.albumFileNoMetal}},[e._v("\n                    Metal\n                ")])])])]),r("div",{staticClass:"select-label-pair bottom-two"},[r("label",{attrs:{for:"critical-reception"}},[e._v("Critical Reception")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.criticalReception,expression:"criticalReception"}],attrs:{id:"critical-reception"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.criticalReception=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"All"}},[e._v("\n                    All\n                ")]),r("option",{attrs:{value:"Respected"}},[e._v("\n                    Spicy\n                ")]),r("option",{attrs:{value:"Average"}},[e._v("\n                    Medium\n                ")]),r("option",{attrs:{value:"Poor"}},[e._v("\n                    Mild\n                ")])])])]),r("div",{staticClass:"select-label-pair bottom-two"},[r("label",{attrs:{for:"release-decade"}},[e._v("Release Window")]),r("div",{staticClass:"select release-decade-select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.releaseDecade,expression:"releaseDecade"}],staticClass:"release-decade-select-inner",attrs:{id:"release-decade"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.releaseDecade=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"All"}},[e._v("\n                    All Time\n                ")]),r("option",{attrs:{value:"New"}},[e._v("\n                    2000 - Present\n                ")]),r("option",{attrs:{value:"Medium"}},[e._v("\n                    1980 - 1999\n                ")]),r("option",{attrs:{value:"Old"}},[e._v("\n                    Before 1980\n                ")])])])])])},Ce=[],Me=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.albumFile=e.$store.getters["albums/albumFile"],e.sortOrder=e.$store.getters["albums/sortOrder"],e.criticalReception=e.$store.getters["albums/reception"],e.releaseDecade=e.$store.getters["albums/releaseDecade"],e.popularity=e.$store.getters["albums/popularity"],e.albumFileAll=j.all,e.albumFileNoMetal=j.noMetal,e}return Object(u["a"])(t,e),Object(L["a"])(t,[{key:"sortOrderSelected",value:function(e){this.$store.commit("albums/setSortOrder",e)}},{key:"receptionSelected",value:function(e){this.$store.commit("albums/setReception",e)}},{key:"decadeSelected",value:function(e){this.$store.commit("albums/setReleaseDecade",e)}},{key:"popularitySelected",value:function(e){this.$store.commit("albums/setPopularity",e)}},{key:"albumFileSelected",value:function(e){this.$store.commit("albums/setAlbumFile",e)}}]),t}(p["c"]);l["a"]([Object(p["d"])("sortOrder")],Me.prototype,"sortOrderSelected",null),l["a"]([Object(p["d"])("criticalReception")],Me.prototype,"receptionSelected",null),l["a"]([Object(p["d"])("releaseDecade")],Me.prototype,"decadeSelected",null),l["a"]([Object(p["d"])("popularity")],Me.prototype,"popularitySelected",null),l["a"]([Object(p["d"])("albumFile")],Me.prototype,"albumFileSelected",null),Me=l["a"]([Object(p["a"])({})],Me);var Pe=Me,Te=Pe,De=(r("fcdd"),Object(v["a"])(Te,Se,Ce,!1,null,"4bc40b3c",null)),$e=De.exports,Ne=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ie=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sk-fading-circle"},[r("div",{staticClass:"sk-circle1 sk-circle"}),r("div",{staticClass:"sk-circle2 sk-circle"}),r("div",{staticClass:"sk-circle3 sk-circle"}),r("div",{staticClass:"sk-circle4 sk-circle"}),r("div",{staticClass:"sk-circle5 sk-circle"}),r("div",{staticClass:"sk-circle6 sk-circle"}),r("div",{staticClass:"sk-circle7 sk-circle"}),r("div",{staticClass:"sk-circle8 sk-circle"}),r("div",{staticClass:"sk-circle9 sk-circle"}),r("div",{staticClass:"sk-circle10 sk-circle"}),r("div",{staticClass:"sk-circle11 sk-circle"}),r("div",{staticClass:"sk-circle12 sk-circle"})])}],Fe=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);Fe=l["a"]([Object(p["a"])({})],Fe);var Le=Fe,qe=Le,Ge=(r("664a"),Object(v["a"])(qe,Ne,Ie,!1,null,"2336f129",null)),Ue=Ge.exports,Be=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(n["a"]);l["a"]([Object(p["b"])()],Be.prototype,"albums",void 0),Be=l["a"]([Object(p["a"])({components:{AlbumDisplay:Ee,AlbumFilters:$e,LoadingAnimation:Ue}})],Be);var Ye=Be,We=Ye,Ve=(r("10d6"),Object(v["a"])(We,Oe,je,!1,null,"af3d83ee",null)),He=Ve.exports,ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"artists"},[r("TimeRange"),r("div",{staticClass:"artist-display-container"},e._l(e.artists,function(e){return r("ArtistDisplay",{key:e.spotifyId,attrs:{artist:e}})}),1)],1)},Je=[],Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"artist-container-outer"},[r("div",{staticClass:"artist-container-inner"},[r("a",{staticClass:"artist-art-link",attrs:{href:e.artist.external_urls.spotify}},[r("div",{staticClass:"artist-art",style:{"background-image":"url("+e.artist.images[0].url+")"}})]),r("p",{staticClass:"artist-name"},[e._v("\n            "+e._s(e.artist.name)+"\n        ")])])])},Ze=[],Ke=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(n["a"]);l["a"]([Object(p["b"])()],Ke.prototype,"artist",void 0),Ke=l["a"]([Object(p["a"])({})],Ke);var Xe=Ke,et=Xe,tt=(r("efdc"),Object(v["a"])(et,Qe,Ze,!1,null,"bffc8444",null)),rt=tt.exports,nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"select-label-pair"},[r("label",{attrs:{for:"time-period"}},[e._v("\n        Learning From Your Favorite Artists of\n    ")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],attrs:{id:"time-period"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selected=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"short"}},[e._v("\n                this Month\n            ")]),r("option",{attrs:{value:"medium"}},[e._v("\n                the Last Six Months\n            ")]),r("option",{attrs:{value:"long"}},[e._v("\n                All Time\n            ")])])])])},at=[],st=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.selected=e.$store.getters["artists/bucket"],e}return Object(u["a"])(t,e),Object(L["a"])(t,[{key:"newTimeRangeSelected",value:function(e){this.$store.commit("artists/setBucket",e)}}]),t}(p["c"]);l["a"]([Object(p["d"])("selected")],st.prototype,"newTimeRangeSelected",null),st=l["a"]([Object(p["a"])({})],st);var it=st,ct=it,ot=(r("4403"),Object(v["a"])(ct,nt,at,!1,null,"01a9be53",null)),ut=ot.exports;function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(r,!0).forEach(function(t){Object(W["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ft=Object(x["a"])("artists"),dt=ft.mapState,mt=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(L["a"])(t,[{key:"artists",get:function(){return this.$store.getters["artists/".concat(this.bucket)]}}]),t}(n["a"]);mt=l["a"]([Object(p["a"])({components:{ArtistDisplay:rt,TimeRange:ut},computed:pt({},dt(["bucket"]))})],mt);var bt=mt,ht=bt,vt=(r("6dcf"),Object(v["a"])(ht,ze,Je,!1,null,"680ae13a",null)),gt=vt.exports,yt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ot=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[r("i",[e._v("μ")]),e._v("Critic\n")])}],jt=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);jt=l["a"]([Object(p["a"])({})],jt);var wt=jt,_t=wt,kt=(r("de90"),Object(v["a"])(_t,yt,Ot,!1,null,"9de8176a",null)),At=kt.exports,Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("LoadingAnimation"),r("h2",{staticClass:"status"},[e._v("\n        "+e._s(e.status)+"\n    ")])],1)},xt=[],Et=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);l["a"]([Object(p["b"])(String)],Et.prototype,"status",void 0),Et=l["a"]([Object(p["a"])({components:{LoadingAnimation:Ue}})],Et);var St=Et,Ct=St,Mt=(r("74a9"),Object(v["a"])(Ct,Rt,xt,!1,null,"fb44139c",null)),Pt=Mt.exports;function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(r,!0).forEach(function(t){Object(W["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var $t,Nt=Object(x["a"])("artists"),It=Nt.mapState;(function(e){e["loadAlbums"]="importing albums",e["encodeArtists"]="learning about artists",e["learnTaste"]="learning your taste",e["rateAlbums"]="calculating album scores",e["loadSpotifyAlbums"]="loading favorite albums",e["sortAlbums"]="sorting albums",e["complete"]="completed"})($t||($t={}));var Ft=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.albums=[],e.albumsOnPage=0,e.loadingMoreAlbums=!0,e.switchedAlbumFiles=!1,e.status=$t.loadAlbums,e}return Object(u["a"])(t,e),Object(L["a"])(t,[{key:"mounted",value:function(){var e=this;this.$store.dispatch("albums/fetch"),this.$store.dispatch("spotify/requestArtists","short"),this.$store.dispatch("spotify/requestArtists","medium"),this.$store.dispatch("spotify/requestArtists","long"),this.$store.subscribe(function(t){switch(t.type){case"artists/setArtists":t.payload.timeRange===e.bucket&&(e.status=$t.encodeArtists);break;case"artists/setEncodings":t.payload.timeRange===e.bucket&&(e.status=$t.learnTaste,e.$store.dispatch("artists/learnTaste"));break;case"artists/setBucket":e.status=$t.learnTaste,e.$store.dispatch("artists/learnTaste");break;case"albums/setAlbumFile":e.switchedAlbumFiles=!0,e.$store.dispatch("albums/fetch");break;case"albums/setSpotifyInfo":var r=e.$store.getters["albums/filteredAlbums"];e.albums=e.albums.concat(r.slice(e.albumsOnPage,e.albumsOnPage+20)),e.albumsOnPage+=20,e.status=$t.complete,e.loadingMoreAlbums=!1;break;case"albums/setPopularity":case"albums/setReleaseDecade":case"albums/setReception":case"albums/setScores":case"albums/setSortOrder":e.status=$t.loadSpotifyAlbums,e.albums=[],e.albumsOnPage=0,e.$store.commit("albums/sort"),e.$store.dispatch("spotify/requestAlbums",{start:0,count:20});break;case"albums/setAlbums":if(!e.switchedAlbumFiles)break;e.switchedAlbumFiles=!1,e.status=$t.rateAlbums,e.$store.dispatch("albums/rate");break;case"setTasteModels":e.status=$t.rateAlbums,e.$store.dispatch("albums/rate");break;default:break}}),window.onscroll=this.scroll}},{key:"scroll",value:function(){var e=document.querySelector(".loading-more-albums-animation");if(null!=e&&!this.loadingMoreAlbums){var t=window.pageYOffset+window.innerHeight,r=e.offsetTop-500;t>=r&&(this.loadingMoreAlbums=!0,this.$store.dispatch("spotify/requestAlbums",{start:this.albumsOnPage,count:20}))}}},{key:"loading",get:function(){return this.status!==$t.complete}}]),t}(n["a"]);Ft=l["a"]([Object(p["a"])({components:{AlbumGallery:He,ArtistGallery:gt,Loading:Pt,SmallLogo:At},computed:Dt({},It(["bucket"]))})],Ft);var Lt=Ft,qt=Lt,Gt=(r("89f3"),Object(v["a"])(qt,ge,ye,!1,null,"686ee56e",null)),Ut=Gt.exports,Bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("See it in action.")]),r("a",{attrs:{href:e.authUrl}},[e._v("Log in with Spotify")])])},Yt=[];function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(r,!0).forEach(function(t){Object(W["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ht=Object(x["a"])("spotify"),zt=Ht.mapGetters,Jt=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(n["a"]);Jt=l["a"]([Object(p["a"])({computed:Vt({},zt(["authUrl"]))})],Jt);var Qt=Jt,Zt=Qt,Kt=(r("0703"),Object(v["a"])(Zt,Bt,Yt,!1,null,"9bc940fa",null)),Xt=Kt.exports;function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(r,!0).forEach(function(t){Object(W["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rr=Object(x["a"])("spotify"),nr=rr.mapState,ar=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(L["a"])(t,[{key:"apiIsLoaded",get:function(){return null!=this.api}}]),t}(p["c"]);ar=l["a"]([Object(p["a"])({components:{Greeting:ve,Recommend:Ut,SpotifyLogin:Xt},computed:tr({},nr(["api"]))})],ar);var sr=ar,ir=sr,cr=Object(v["a"])(ir,ue,le,!1,null,null,null),or=cr.exports,ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("SmallLogo"),e._m(0)],1)},lr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about-content"},[r("h1",{staticClass:"about-header"},[e._v("\n            Approach\n        ")]),r("p",[e._v("\n            μCritic imagines "),r("i",[e._v("you")]),e._v(" as a music critic.\n        ")]),r("p",[e._v("\n            At the heart of μCritic is an enormous quantity of data scraped from "),r("a",{attrs:{href:"https://rateyourmusic.com/"}},[e._v("Rate Your Music")]),e._v(", a website where passionate amateur music critics rate albums on a scale of 0 - 5. μCritic has analyzed hundreds of thousands of album reviews, learning the unique music tastes belonging to hundreds of Rate Your Music users. Then, it explored the relationship between the music tastes and favorite artists of each user.\n        ")]),r("p",[e._v("\n            To recommend albums for new users, μCritic reverses this process. When a user logs in with Spotify, their 5 favorite artists are fed into the system. μCritic uses these artists to construct of the user’s music taste, as if they were a critic from Rate Your Music. This taste is applied to a large set of albums, generating a numeric rating for each. The albums are sorted according to these ratings, and presented as recommendations.\n        ")]),r("hr"),r("h1",{staticClass:"about-header"},[e._v("\n            Source Code\n        ")]),r("h2",[r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic"}},[e._v("Data & Model")])]),r("h2",[r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic_App"}},[e._v("Web App")])]),r("hr"),r("h1",{staticClass:"about-header"},[e._v("\n            Dataset\n        ")]),r("p",[e._v("\n            μCritic is built on a fully custom dataset aggregated specifically for the project. A custom web scraper was built to crawl Rate Your Music and save the highly relational music data into a local database. Spotify IDs for each of the scraped albums/artists were mapped via the "),r("a",{attrs:{href:"https://developer.spotify.com/documentation/web-api/reference/search/search/"}},[e._v("Spotify API search endpoint")]),e._v(" and used for further data retrieval. The final training dataset consists of roughly\n            "),r("ul",[r("li",[e._v("250 users")]),r("li",[e._v("40,000 artists")]),r("li",[e._v("150,000 albums")]),r("li",[e._v("300,000 user reviews")])])]),r("p",{staticClass:"footnote"},[e._v("\n            *The legality of web scraping has been repeatedly upheld in court. Furthermore, μCritic's use of the data falls under fair use.\n        ")]),r("hr"),r("h1",{staticClass:"about-header"},[e._v("\n            Models\n        ")]),r("p",{staticClass:"subheading-link"},[r("a",{attrs:{href:"https://i.imgur.com/wHM4wJa.jpg"}},[e._v("master diagram")])]),r("h2",[e._v("\n            Model 1 - "),r("a",{attrs:{href:"https://i.imgur.com/JMjUQoZ.jpg"}},[e._v("diagram")])]),r("p",[r("ul",[r("li",[e._v("Type: Deep Belief Network")]),r("li",[e._v("Input: Artist Data (from Spotify API & RYM Scraper)")]),r("li",[e._v("Output: Latent Artist Representation")]),r("li",[e._v("Internal Models")]),r("ul",[r("li",[e._v("a: Autoencoder")]),r("li",[e._v("b: Recurrent Autoencoder")]),r("li",[e._v("c: Autoencoder")])])])]),r("h2",[e._v("\n            Model 2 - "),r("a",{attrs:{href:"https://i.imgur.com/qJWVhWx.jpg"}},[e._v("diagram")])]),r("p",[r("ul",[r("li",[e._v("Type: Deep Belief Network")]),r("li",[e._v("Input: Album Data (from Spotify API)")]),r("li",[e._v("Output: Latent Album Representation")]),r("li",[e._v("Internal Models")]),r("ul",[r("li",[e._v("a: Autoencoder")]),r("li",[e._v("b: Recurrent Autoencoder")]),r("li",[e._v("c: Autoencoder")])])])]),r("h2",[e._v("\n            Model 3\n        ")]),r("p",[r("ul",[r("li",[e._v("Type: Perceptron")]),r("li",[e._v("Input: Latent Album Representation")]),r("li",[e._v("Output: Album Score")])])]),r("h2",[e._v("\n            Model 4\n        ")]),r("p",[r("ul",[r("li",[e._v("Type: Recurrent Autoencoder")]),r("li",[e._v("Input: 5 Ouputs of "),r("b",[e._v("Model 2")])]),r("li",[e._v("Output: Latent Artist Representations")])])]),r("h2",[e._v("\n            Model 5\n        ")]),r("p",[r("ul",[r("li",[e._v("Type: Vec2Vec Neural Network")]),r("li",[e._v("Input: Output of "),r("b",[e._v("Model 4")])]),r("li",[e._v("Output: Weights for "),r("b",[e._v("Model 3")]),e._v(" (music taste)")])])]),r("p",{staticClass:"footnote"},[e._v("\n            *Testing and validation datasets withheld for all models during training. For metric integrity, models have not yet been evaluated using test sets, and will not be until μCritic has a stable release. Validation sets were used during training to fine-tune hyperparameters.\n        ")]),r("hr"),r("h1",{staticClass:"about-header"},[e._v("\n            Tooling\n        ")]),r("h2",[e._v("\n            Web Scraping & Data Handling\n        ")]),r("p",[r("ul",[r("li",[e._v("Language: Typescript")]),r("li",[e._v("Platform: Node.js")]),r("li",[e._v("Database: PostgreSQL, via "),r("a",{attrs:{href:"https://typeorm.io/"}},[e._v("TypeORM")])]),r("li",[e._v("Caching: Redis")]),r("li",[e._v("Scraping/Parsing: "),r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic/tree/master/src"}},[e._v("Fully Custom")])]),r("li",[e._v("Proxy Management: "),r("a",{attrs:{href:"https://www.scraperapi.com/"}},[e._v("ScraperApi")])])])]),r("h2",[e._v("\n            Machine Learning\n        ")]),r("p",[r("ul",[r("li",[e._v("Languages")]),r("ul",[r("li",[e._v("Python (modeling)")]),r("li",[e._v("TypeScript (data pipeline)")])]),r("li",[e._v("Libraries")]),r("ul",[r("li",[e._v("Tensorflow 2.0")]),r("li",[e._v("Tensorflow.js")]),r("li",[e._v("Numpy")])])])]),r("h2",[r("a",{attrs:{href:"https://michaeldarr.github.io/MuCritic_App/"}},[e._v("Web App")])]),r("p",[r("ul",[r("li",[e._v("Language: Typescript")]),r("li",[e._v("Frameworks")]),r("ul",[r("li",[e._v("Vue.js")]),r("li",[e._v("Vuex")]),r("li",[e._v("Tensorflow.js")])]),r("li",[e._v("Bundler: webpack")]),r("li",[e._v("Deployment: Github Pages")])])])])}],pr=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(n["a"]);pr=l["a"]([Object(p["a"])({components:{SmallLogo:At}})],pr);var fr=pr,dr=fr,mr=(r("e963"),Object(v["a"])(dr,ur,lr,!1,null,"dde52ae4",null)),br=mr.exports,hr=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},vr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Can't find page! (404)")])])}],gr={},yr=Object(v["a"])(gr,hr,vr,!1,null,null,null),Or=yr.exports,jr=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},wr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Something went wrong... (500)")])])}],_r={},kr=Object(v["a"])(_r,jr,wr,!1,null,null,null),Ar=kr.exports;n["a"].use(R["a"]);var Rr=new R["a"]({routes:[{path:"/",name:"run",component:or},{path:"/about",name:"about",component:br},{path:"/404",name:"notFound",component:Or},{path:"/500",name:"error",component:Ar}]});Rr.beforeEach(function(e,t,r){try{0===e.matched.length&&(oe.dispatch("spotify/initializeApi",e.fullPath),r("/")),r()}catch(n){oe.commit("logError",{location:"page routing",error:n}),r("/500")}});var xr=Rr;n["a"].config.productionTip=!1,new n["a"]({router:xr,store:oe,render:function(e){return e(A)}}).$mount("#app")},d412:function(e,t,r){},de90:function(e,t,r){"use strict";var n=r("8285"),a=r.n(n);a.a},e963:function(e,t,r){"use strict";var n=r("4228"),a=r.n(n);a.a},efdc:function(e,t,r){"use strict";var n=r("20e9"),a=r.n(n);a.a},f234:function(e,t,r){},fcdd:function(e,t,r){"use strict";var n=r("357c"),a=r.n(n);a.a}});
//# sourceMappingURL=app.7b6ba5c2.js.map