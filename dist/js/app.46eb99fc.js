(function(e){function t(t){for(var a,i,o=t[0],c=t[1],u=t[2],p=0,d=[];p<o.length;p++)i=o[p],n[i]&&d.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/MuCritic_App/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"0703":function(e,t,r){"use strict";var a=r("11fa"),n=r.n(a);n.a},"08f1":function(e,t,r){},"0d5b":function(e,t,r){},1:function(e,t){},10:function(e,t){},"10d6":function(e,t,r){"use strict";var a=r("9904"),n=r.n(a);n.a},11:function(e,t){},"11fa":function(e,t,r){},1343:function(e,t,r){},"1bc4":function(e,t,r){"use strict";var a=r("b268"),n=r.n(a);n.a},2:function(e,t){},"2bb7":function(e,t,r){},3:function(e,t){},3169:function(e,t,r){"use strict";var a=r("98f6"),n=r.n(a);n.a},"31a5":function(e,t,r){"use strict";var a=r("1343"),n=r.n(a);n.a},4:function(e,t){},4403:function(e,t,r){"use strict";var a=r("704d"),n=r.n(a);n.a},5:function(e,t){},6:function(e,t){},"664a":function(e,t,r){"use strict";var a=r("ba37"),n=r.n(a);n.a},"6dcf":function(e,t,r){"use strict";var a=r("92a9"),n=r.n(a);n.a},7:function(e,t){},"704d":function(e,t,r){},"74a9":function(e,t,r){"use strict";var a=r("0d5b"),n=r.n(a);n.a},"786d":function(e,t,r){"use strict";var a=r("c328"),n=r.n(a);n.a},"7cfa":function(e,t,r){"use strict";var a=r("b82e"),n=r.n(a);n.a},8:function(e,t){},"85ec":function(e,t,r){},9:function(e,t){},"92a9":function(e,t,r){},"98f6":function(e,t,r){},9904:function(e,t,r){},b268:function(e,t,r){},b82e:function(e,t,r){},ba37:function(e,t,r){},c328:function(e,t,r){},c75e:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Nav"),r("router-view")],1)},s=[],i=r("d225"),o=r("308d"),c=r("6bb5"),u=r("4e2b"),l=r("9ab4"),p=r("60a3"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"nav-container"},[r("router-link",{attrs:{to:"/"}},[e._v(" Learn Your Taste ")]),r("router-link",{attrs:{to:"/about"}},[e._v(" About The Model ")]),r("a",{attrs:{href:"https://michaeldarr.github.io/#/contact"}},[e._v("Get In Touch")]),r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic"}},[e._v("Source Code")])],1)},f=[],m=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);m=l["a"]([Object(p["a"])({})],m);var b=m,h=b,v=(r("3169"),r("2877")),y=Object(v["a"])(h,d,f,!1,null,"3ea3b8de",null),g=y.exports,O=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(a["a"]);O=l["a"]([Object(p["a"])({components:{Nav:g}})],O);var w,_=O,j=_,k=(r("034f"),Object(v["a"])(j,n,s,!1,null,null,null)),A=k.exports,x=r("8c4f"),R=r("2f62");(function(e){e["all"]="https://michaeldarr.github.io/MuCritic_App/album_data.csv",e["noMetal"]="https://michaeldarr.github.io/MuCritic_App/album_data_no_metal.csv"})(w||(w={}));r("c5f6"),r("28a5"),r("96cf");var E=r("3b8d"),S=r("0b53"),C=r("30dc"),M=r.n(C),P={fetch:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=t.state,e.next=3,new Promise((function(e,t){M()(a.albumFile,(function(r,a,n){null!=r?t(new Error("album data failed to load: ".concat(r))):e(n)}))}));case 3:n=e.sent,s=n.split("\n"),s.shift(),i=s.map((function(e){var t=e.split(",");return{spotifyId:t[0],popularity:Number(t[1]),rymRating:Number(t[2]),releaseYear:Number(t[3]),encoding:[Number(t[4]),Number(t[5]),Number(t[6]),Number(t[7]),Number(t[8]),Number(t[9]),Number(t[10]),Number(t[11]),Number(t[12]),Number(t[13]),Number(t[14]),Number(t[15]),Number(t[16]),Number(t[17]),Number(t[18]),Number(t[19])],userScore:null,userScoreAdjusted:null,imageUrl:null,spotifyUrl:null,name:null,artist:null}})),r("setAlbums",i);case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),rate:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,o,c,u,l,p,d,f,m,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a=t.rootState,n=t.state,null!=a.tasteModel&&null!=a.tasteModelAdjusted){e.next=3;break}throw new Error("Tried to rate albums before model creation");case 3:if(null!=n.albums){e.next=5;break}throw new Error("No albums to rate");case 5:return s=a.tasteModel,i=a.tasteModelAdjusted,o=n.albums,c=o.map((function(e){return e.encoding})),u=S["f"](c,[c.length,16]),l=s.predict(u),e.next=13,l.array();case 13:return p=e.sent,d=p.map((function(e){return 2*(4.5*e[0]+.5)})),f=i.predict(u),e.next=18,f.array();case 18:m=e.sent,b=m.map((function(e){return e[0]})),r("setScores",{scores:d,scoresAdjusted:b});case 21:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()};r("55dd"),r("7f7f"),r("ac6a");function T(e){return null==e.userScoreAdjusted||null==e.userScore?-1:Math.sqrt(e.userScore)/40+e.userScoreAdjusted}var D={reset:function(e){e.albums=[],e.filteredAlbums=[],e.filteredAlbums=[],e.sortOrder="Love",e.reception="All",e.releaseDecade="All",e.popularity="All",e.albumFile=w.noMetal},setAlbums:function(e,t){e.albums=t,e.filteredAlbums=t},setPopularity:function(e,t){e.popularity=t},setScores:function(e,t){t.scores.forEach((function(t,r){e.albums[r].userScore=t})),t.scoresAdjusted.forEach((function(t,r){e.albums[r].userScoreAdjusted=t}))},setAlbumFile:function(e,t){e.albumFile=t},setReception:function(e,t){e.reception=t},setReleaseDecade:function(e,t){e.releaseDecade=t},setSortOrder:function(e,t){e.sortOrder=t},setSpotifyInfo:function(e,t){t.spotifyAlbums.forEach((function(r,a){var n=500,s={height:819,url:"https://i.imgur.com/otLb7Vf.png",width:819};r.images.forEach((function(e){("https://i.imgur.com/otLb7Vf.png"===s.url||Math.abs(s.width)-n>Math.abs(e.width-n))&&(s=e)})),e.filteredAlbums[a+t.start].imageUrl=s.url,e.filteredAlbums[a+t.start].spotifyUrl=r.external_urls.spotify,e.filteredAlbums[a+t.start].name=r.name,e.filteredAlbums[a+t.start].artist=r.artists[0].name}))},sort:function(e){var t=e.popularity,r=e.reception,a=e.releaseDecade,n=e.sortOrder,s=e.albums;switch(r){case"Respected":s=s.filter((function(e){return e.rymRating>4}));break;case"Average":s=s.filter((function(e){return e.rymRating<=4&&e.rymRating>2.7}));break;case"Poor":s=s.filter((function(e){return e.rymRating<=2.7}));break;default:}switch(a){case"New":s=s.filter((function(e){return e.releaseYear>=2e3}));break;case"Medium":s=s.filter((function(e){return e.releaseYear<2e3&&e.releaseYear>=1980}));break;case"Old":s=s.filter((function(e){return e.releaseYear<1980}));break;default:}switch(t){case"Popular":s=s.filter((function(e){return e.popularity>=40}));break;case"Average":s=s.filter((function(e){return e.popularity<40&&e.popularity>=20}));break;case"Niche":s=s.filter((function(e){return e.popularity<20}));break;default:}e.filteredAlbums=s.sort((function(e,t){switch(n){case"Hate":return T(e)-T(t);case"Love":return T(t)-T(e);default:return-1}}))}},$={albums:function(e){return e.albums},albumFile:function(e){return e.albumFile},filteredAlbums:function(e){return e.filteredAlbums},popularity:function(e){return e.popularity},releaseDecade:function(e){return e.releaseDecade},reception:function(e){return e.reception},sortOrder:function(e){return e.sortOrder},loaded:function(e){return 0!==e.albums.length},scored:function(e){return 0!==e.albums.length&&null!=e.albums[0].userScore}},N={albums:[],filteredAlbums:[],sortOrder:"Love",reception:"All",releaseDecade:"All",popularity:"All",albumFile:w.noMetal},I=!0,L={namespaced:I,state:N,actions:P,getters:$,mutations:D},F=(r("5df3"),r("b0b4")),q=r("768b"),U=(r("673e"),function(){function e(){Object(i["a"])(this,e),this.artistEncoderInstance={model:null,path:"models/artistEncoder/model.json"},this.favoriteArtistsEncoderInstance={model:null,path:"models/favoriteArtistsEncoder/model.json"},this.tasteMapperInstance={model:null,path:"models/taste/model.json"},this.trackEncoderInstance={model:null,path:"models/trackEncoder/model.json"},this.trackSequenceEncoderInstance={model:null,path:"models/trackSequenceEncoder/model.json"}}return Object(F["a"])(e,[{key:"artistEncoder",value:function(){return e.loadModel(this.artistEncoderInstance)}},{key:"favoriteArtistsEncoder",value:function(){return e.loadModel(this.favoriteArtistsEncoderInstance)}},{key:"tasteMapper",value:function(){return e.loadModel(this.tasteMapperInstance)}},{key:"trackEncoder",value:function(){return e.loadModel(this.trackEncoderInstance)}},{key:"trackSequenceEncoder",value:function(){return e.loadModel(this.trackSequenceEncoderInstance)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"loadModel",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.model){e.next=4;break}return e.next=3,S["b"](t.path);case 3:t.model=e.sent;case 4:return e.abrupt("return",t.model);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),G=function(){function e(){Object(i["a"])(this,e)}return Object(F["a"])(e,null,[{key:"artist",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=U.getInstance(),e.next=3,r.artistEncoder();case 3:return a=e.sent,n=S["e"](t).as2D(1,33),s=a.predict(n),e.next=8,s.array();case 8:return i=e.sent,e.abrupt("return",i[0]);case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"taste",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,o,c,u,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length<5)){e.next=2;break}throw new Error("taste encoder must be passed 5 artists");case 2:return r=U.getInstance(),e.next=5,r.favoriteArtistsEncoder();case 5:return a=e.sent,e.next=8,r.tasteMapper();case 8:return n=e.sent,s=S["e"](t.slice(0,5)).as3D(1,5,16),i=a.predict(s),o=n.predict(i),o=o.reshape([16,1]),c=S["f"]([[-.2658042312],[-.2918781042],[.4476911426],[.035458602],[.1686497927],[.2152237296],[-.4066027105],[.1940803975],[.0597865917],[.4049637318],[-.0558041073],[-.2366468459],[.0106893238],[-.4115174115],[.1501134783],[-.2174658924]]),u=S["d"](o,c),l=S["c"](),l.add(S["a"].dense({inputShape:[16],name:"perceptron",units:1,useBias:!1,weights:[o]})),p=S["c"](),p.add(S["a"].dense({inputShape:[16],name:"perceptron",units:1,useBias:!1,weights:[u]})),e.abrupt("return",{model:l,adjustedModel:p});case 20:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"track",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[r.acousticness,r.danceability,t.duration_ms/6e5,r.energy,t.explicit?1:0,r.instrumentalness,r.liveness,Math.max(-1*r.loudness+10,0)/70,r.mode,t.popularity/100,r.speechiness,r.tempo/200,r.time_signature/8,t.track_number/10,r.valence],n=U.getInstance(),e.next=4,n.trackEncoder();case 4:return s=e.sent,i=S["e"](a).as2D(1,15),o=s.predict(i),e.next=9,o.array();case 9:return c=e.sent,u=Object(q["a"])(c,1),l=u[0],e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"trackSequence",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=U.getInstance(),e.next=3,a.trackSequenceEncoder();case 3:return n=e.sent,s=S["e"](t).as3D(1,5,13),i=n.predict(s),e.next=8,i.array();case 8:return o=e.sent,e.abrupt("return",[r/100].concat(o[0]));case 10:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),Y=function(){function e(t,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;Object(i["a"])(this,e),this.spotifyId=t,this.artistPopularity=r,this.spotifyApi=a,this.trackCount=n,this.encodedTracks=[]}return Object(F["a"])(e,[{key:"encodeArtist",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.artistAggregation){e.next=2;break}throw new Error("Cannot encode null artist");case 2:return e.next=4,G.artist(this.artistAggregation);case 4:this.encodedArtist=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"encodeTrackSequence",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(5===this.encodedTracks.length){e.next=2;break}throw new Error("track sequence encoder found ".concat(this.encodedTracks.length," tracks (should be 5)"));case 2:return e.next=4,G.trackSequence(this.encodedTracks,this.artistPopularity);case 4:this.artistAggregation=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"encodeTracks",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.spotifyResponse&&null!=this.spotifyFeaturesResponse){e.next=2;break}throw new Error("Tried to encode track before receiving all info");case 2:return e.next=4,Promise.all(this.spotifyResponse.tracks.map(function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.spotifyFeaturesResponse){e.next=2;break}throw new Error("Tried to encode track before receiving all info");case 2:return e.abrupt("return",G.track(r,t.spotifyFeaturesResponse.audio_features[a]));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 4:this.encodedTracks=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestTracks",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.spotifyApi.getArtistTopTracks(this.spotifyId);case 2:if(this.spotifyResponse=e.sent,!(this.spotifyResponse.tracks.length<this.trackCount)){e.next=5;break}throw new Error("Artist scraper found less than ".concat(this.trackCount," top tracks"));case 5:return this.spotifyResponse.tracks=this.spotifyResponse.tracks.slice(0,this.trackCount),t=this.spotifyResponse.tracks.map((function(e){return e.id})),e.next=9,this.spotifyApi.getBatch(t,"audio-features");case 9:this.spotifyFeaturesResponse=e.sent;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getEncodedArtist",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.requestTracks();case 2:return e.next=4,this.encodeTracks();case 4:return e.next=6,this.encodeTrackSequence();case 6:return e.next=8,this.encodeArtist();case 8:if(null!=this.encodedArtist){e.next=10;break}throw new Error("Failed to encode artist: ".concat(this.spotifyId));case 10:return e.abrupt("return",this.encodedArtist);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),B={encode:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.state,s=t.rootGetters,i=s["spotify/api"],null!=i){e.next=4;break}throw new Error("cannot encode artists, Spotify API is uninitiailized");case 4:return e.next=6,Promise.all(n[r].map(function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new Y(t.id,t.popularity,i),e.abrupt("return",r.getEncodedArtist());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:o=e.sent,a("setEncodings",{encodedArtists:o,timeRange:r});case 8:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),learnTaste:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=t.state,n=a[a.bucket].slice(0,5),s=n.map((function(e){var t=e.encoded;if(null==t)throw new Error("Tried to learn taste from unencoded artist.");return t})),e.next=5,G.taste(s);case 5:i=e.sent,r("setTasteModels",i,{root:!0});case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},z=(r("8e6e"),r("456d"),r("bd86"));function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(r,!0).forEach((function(t){Object(z["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H,J={reset:function(e){e.short=[],e.medium=[],e.long=[],e.bucket="medium"},setArtists:function(e,t){var r=t.artists.map((function(e){return V({encoded:null},e)}));e[t.bucket]=r},setEncodings:function(e,t){t.encodedArtists.forEach((function(r,a){e[t.timeRange][a].encoded=r}))},setBucket:function(e,t){e.bucket=t}},Q={loaded:function(e){return{short:e.short.length>0,medium:e.medium.length>0,long:e.long.length>0}},encoded:function(e){var t={short:!1,medium:!1,long:!1};return e.short.length>0&&null!=e.short[0].encoded&&(t.short=!0),e.medium.length>0&&null!=e.medium[0].encoded&&(t.medium=!0),e.long.length>0&&null!=e.long[0].encoded&&(t.long=!0),t},bucket:function(e){return e.bucket},short:function(e){return e.short},medium:function(e){return e.medium},long:function(e){return e.long}},Z={short:[],medium:[],long:[],bucket:"medium"},K=!0,X={namespaced:K,state:Z,actions:B,getters:Q,mutations:J},ee={api:function(e){return e.api},apiIsActive:function(e){return null!=e.api&&!e.api.isExpired()},authUrl:function(e){var t=e.baseUrl;return t+="?client_id=".concat(e.clientId),t+="&response_type=".concat(e.responseType),t+="&redirect_uri=".concat(e.redirectUri),t+="&scope=".concat(e.scope),t}};(function(e){e["short"]="short_term",e["medium"]="medium_term",e["long"]="long_term"})(H||(H={}));r("ee1d");var te=function(){function e(t,r){Object(i["a"])(this,e);var a="",n=0,s=t.substring(1).split("&");if(s.forEach((function(e){var t=e.split("=");if(2===t.length){var s=Object(q["a"])(t,2),i=s[0],o=s[1];switch(i){case"access_token":a=o;break;case"expires_in":if(Number.isNaN(Number(o)))throw new Error("expiration value non-numeric: ".concat(o));n=Number(o);break;case"token_type":if("Bearer"!==o)throw new Error("non-Bearer token recieved: ".concat(o));break;default:r("miscLog",{location:"Spotify token retrieval",message:"unexpected parameter receieved:\n".concat(i,": ").concat(o)})}}})),null==a||""===a)throw new Error("failed to retrieve access token");if(null==n||0===n)throw new Error("failed to retrieve access token expiration");this.accessToken=a,this.expirationTimestamp=Date.now()+1e3*n}return Object(F["a"])(e,[{key:"isExpired",value:function(){return Date.now()>=this.expirationTimestamp}},{key:"getArtist",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="https://api.spotify.com/v1/artists/".concat(t),e.abrupt("return",this.spotifyRequest(r,"GET"));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getArtistTopTracks",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:"US",a="https://api.spotify.com/v1/artists/".concat(t,"/top-tracks?country=").concat(r),e.abrupt("return",this.spotifyRequest(a,"GET"));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBatch",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Array.isArray(t)?t.join(","):t,n="https://api.spotify.com/v1/".concat(r,"?ids=").concat(a),e.abrupt("return",this.spotifyRequest(n,"GET"));case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getUserTopMusic",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"medium_term",a=i.length>2&&void 0!==i[2]?i[2]:20,n=i.length>3&&void 0!==i[3]?i[3]:0,s="https://api.spotify.com/v1/me/top/".concat(t,"?limit=").concat(a,"&offset=").concat(n,"&time_range=").concat(r),e.abrupt("return",this.spotifyRequest(s,"GET"));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="https://api.spotify.com/v1/search?q=".concat(t,"&type=").concat(r,"&limit=").concat(a),e.abrupt("return",this.spotifyRequest(n,"GET"));case 2:case"end":return e.stop()}}),e,this)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"spotifyRequest",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isExpired()){e.next=2;break}throw new Error("Spotify Token Expired");case 2:return e.abrupt("return",new Promise((function(e,n){var s={url:t,method:r,json:!0,headers:{Authorization:"Bearer ".concat(a.accessToken)}};M()(s,(function(s,i,o){if(null!=s)n(new Error("request failed for ".concat(t,": ").concat(s)));else if(null==o)n(new Error("request failed for ".concat(t,": body was null")));else if(null!=o.error&&429===o.error.status){var c=a;setTimeout((function(){e(c.spotifyRequest(t,r))}),1e3*i.headers["Retry-After"])}else e(o)}))})));case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),re={initializeApi:function(e,t){var r=e.commit;try{var a=new te(t,r);r("storeApi",a)}catch(n){r("logError",{location:"Spotify token retrieval",message:n})}},requestArtists:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.dispatch,s=t.state,null==s.api){e.next=7;break}return e.next=4,s.api.getUserTopMusic("artists",H[r],5,0);case 4:i=e.sent,a("artists/setArtists",{artists:i.items,bucket:r},{root:!0}),n("artists/encode",r,{root:!0});case 7:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),requestAlbums:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,n=t.state,s=t.rootGetters,null==n.api){e.next=8;break}return i=s["albums/filteredAlbums"],o=i.slice(r.start,r.start+r.count).map((function(e){return e.spotifyId})),e.next=6,n.api.getBatch(o,"albums");case 6:c=e.sent,a("albums/setSpotifyInfo",{start:r.start,spotifyAlbums:c.albums},{root:!0});case 8:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},ae={storeApi:function(e,t){e.api=t}},ne={baseUrl:"https://accounts.spotify.com/authorize",clientId:"a01304edb42448d1aa31c3b255400130",redirectUri:"https://michaeldarr.github.io/MuCritic_App/",responseType:"token",scope:"user-top-read",api:null},se=!0,ie={namespaced:se,state:ne,getters:ee,actions:re,mutations:ae};a["a"].use(R["b"]);var oe={state:{errorLog:[],miscLog:[],tasteModel:null,tasteModelAdjusted:null},modules:{albums:L,artists:X,spotify:ie},mutations:{logError:function(e,t){e.errorLog.push(t)},logMisc:function(e,t){e.miscLog.push(t)},reset:function(e){e.errorLog=[],e.miscLog=[],e.tasteModel=null,e.tasteModelAdjusted=null},setTasteModels:function(e,t){e.tasteModel=t.model,e.tasteModelAdjusted=t.adjustedModel}}},ce=new R["b"].Store(oe),ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.apiIsActive?r("div",[r("Recommend")],1):r("div",[r("Greeting"),r("SpotifyLogin")],1)},le=[],pe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},de=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[r("i",[e._v("μ")]),e._v("Critic ")]),r("p",{staticClass:"credit-line"},[e._v(" by Michael Darr ")]),r("h2",{staticClass:"subheadding"},[r("span",{staticClass:"sub-1"},[e._v(" learning your music taste with ")]),r("br"),r("span",{staticClass:"sub-2"},[e._v(" deep neural networks ")])])])}],fe=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);fe=l["a"]([Object(p["a"])({})],fe);var me=fe,be=me,he=(r("31a5"),Object(v["a"])(be,pe,de,!1,null,"69115038",null)),ve=he.exports,ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("SmallLogo"),e.loading?r("Loading",{attrs:{status:e.status}}):r("div",[r("ArtistGallery"),r("AlbumGallery",{attrs:{albums:e.albums}})],1)],1)},ge=[],Oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"albums"},[r("h1",[e._v("Recommendations")]),r("AlbumFilters"),r("div",{staticClass:"album-display-container"},e._l(e.albums,(function(e){return r("AlbumDisplay",{key:e.spotifyId,attrs:{album:e}})})),1),r("div",{staticClass:"loading-more-albums-animation"},[r("LoadingAnimation")],1)],1)},we=[],_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"album-container-outer"},[r("div",{staticClass:"album-container-inner"},[r("a",{staticClass:"album-art-link",attrs:{href:e.album.spotifyUrl}},[r("div",{staticClass:"album-art",style:{"background-image":"url("+e.album.imageUrl+")"}})]),r("p",{staticClass:"album-name"},[e._v(" "+e._s(e.album.name)+" ")]),r("p",{staticClass:"artist-name"},[e._v(" "+e._s(e.album.artist)+" ")])])])},je=[],ke=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(a["a"]);l["a"]([Object(p["b"])()],ke.prototype,"album",void 0),ke=l["a"]([Object(p["a"])({})],ke);var Ae=ke,xe=Ae,Re=(r("786d"),Object(v["a"])(xe,_e,je,!1,null,"c1652774",null)),Ee=Re.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"filter-container"},[r("div",{staticClass:"select-label-pair top-three"},[r("label",{attrs:{for:"sort-order"}},[e._v("Music You'll")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.sortOrder,expression:"sortOrder"}],attrs:{id:"sort-order"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sortOrder=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"Love"}},[e._v(" Love ")]),r("option",{attrs:{value:"Hate"}},[e._v(" Hate ")])])])]),r("div",{staticClass:"select-label-pair top-three"},[r("label",{attrs:{for:"popularity"}},[e._v("Popularity")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.popularity,expression:"popularity"}],attrs:{id:"popularity"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.popularity=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"All"}},[e._v(" All ")]),r("option",{attrs:{value:"Popular"}},[e._v(" Popular ")]),r("option",{attrs:{value:"Average"}},[e._v(" Average ")]),r("option",{attrs:{value:"Niche"}},[e._v(" Niche ")])])])]),r("div",{staticClass:"select-label-pair top-three"},[r("label",{attrs:{for:"excluded-genre"}},[e._v("Exclude")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.albumFile,expression:"albumFile"}],attrs:{id:"excluded-genres"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.albumFile=t.target.multiple?r:r[0]}}},[r("option",{domProps:{value:e.albumFileAll}},[e._v(" None ")]),r("option",{domProps:{value:e.albumFileNoMetal}},[e._v(" Metal ")])])])]),r("div",{staticClass:"select-label-pair bottom-two"},[r("label",{attrs:{for:"critical-reception"}},[e._v("Critical Reception")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.criticalReception,expression:"criticalReception"}],attrs:{id:"critical-reception"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.criticalReception=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"All"}},[e._v(" All ")]),r("option",{attrs:{value:"Respected"}},[e._v(" Spicy ")]),r("option",{attrs:{value:"Average"}},[e._v(" Medium ")]),r("option",{attrs:{value:"Poor"}},[e._v(" Mild ")])])])]),r("div",{staticClass:"select-label-pair bottom-two"},[r("label",{attrs:{for:"release-decade"}},[e._v("Release Window")]),r("div",{staticClass:"select release-decade-select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.releaseDecade,expression:"releaseDecade"}],staticClass:"release-decade-select-inner",attrs:{id:"release-decade"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.releaseDecade=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"All"}},[e._v(" All Time ")]),r("option",{attrs:{value:"New"}},[e._v(" 2000 - Present ")]),r("option",{attrs:{value:"Medium"}},[e._v(" 1980 - 1999 ")]),r("option",{attrs:{value:"Old"}},[e._v(" Before 1980 ")])])])])])},Ce=[],Me=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.albumFile=e.$store.getters["albums/albumFile"],e.sortOrder=e.$store.getters["albums/sortOrder"],e.criticalReception=e.$store.getters["albums/reception"],e.releaseDecade=e.$store.getters["albums/releaseDecade"],e.popularity=e.$store.getters["albums/popularity"],e.albumFileAll=w.all,e.albumFileNoMetal=w.noMetal,e}return Object(u["a"])(t,e),Object(F["a"])(t,[{key:"sortOrderSelected",value:function(e){this.$store.commit("albums/setSortOrder",e)}},{key:"receptionSelected",value:function(e){this.$store.commit("albums/setReception",e)}},{key:"decadeSelected",value:function(e){this.$store.commit("albums/setReleaseDecade",e)}},{key:"popularitySelected",value:function(e){this.$store.commit("albums/setPopularity",e)}},{key:"albumFileSelected",value:function(e){this.$store.commit("albums/setAlbumFile",e)}}]),t}(p["c"]);l["a"]([Object(p["d"])("sortOrder")],Me.prototype,"sortOrderSelected",null),l["a"]([Object(p["d"])("criticalReception")],Me.prototype,"receptionSelected",null),l["a"]([Object(p["d"])("releaseDecade")],Me.prototype,"decadeSelected",null),l["a"]([Object(p["d"])("popularity")],Me.prototype,"popularitySelected",null),l["a"]([Object(p["d"])("albumFile")],Me.prototype,"albumFileSelected",null),Me=l["a"]([Object(p["a"])({})],Me);var Pe=Me,Te=Pe,De=(r("fcdd"),Object(v["a"])(Te,Se,Ce,!1,null,"4bc40b3c",null)),$e=De.exports,Ne=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ie=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sk-fading-circle"},[r("div",{staticClass:"sk-circle1 sk-circle"}),r("div",{staticClass:"sk-circle2 sk-circle"}),r("div",{staticClass:"sk-circle3 sk-circle"}),r("div",{staticClass:"sk-circle4 sk-circle"}),r("div",{staticClass:"sk-circle5 sk-circle"}),r("div",{staticClass:"sk-circle6 sk-circle"}),r("div",{staticClass:"sk-circle7 sk-circle"}),r("div",{staticClass:"sk-circle8 sk-circle"}),r("div",{staticClass:"sk-circle9 sk-circle"}),r("div",{staticClass:"sk-circle10 sk-circle"}),r("div",{staticClass:"sk-circle11 sk-circle"}),r("div",{staticClass:"sk-circle12 sk-circle"})])}],Le=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);Le=l["a"]([Object(p["a"])({})],Le);var Fe=Le,qe=Fe,Ue=(r("664a"),Object(v["a"])(qe,Ne,Ie,!1,null,"2336f129",null)),Ge=Ue.exports,Ye=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(a["a"]);l["a"]([Object(p["b"])()],Ye.prototype,"albums",void 0),Ye=l["a"]([Object(p["a"])({components:{AlbumDisplay:Ee,AlbumFilters:$e,LoadingAnimation:Ge}})],Ye);var Be=Ye,ze=Be,We=(r("10d6"),Object(v["a"])(ze,Oe,we,!1,null,"af3d83ee",null)),Ve=We.exports,He=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"artists"},[r("TimeRange"),r("div",{staticClass:"artist-display-container"},e._l(e.artists,(function(e){return r("ArtistDisplay",{key:e.spotifyId,attrs:{artist:e}})})),1)],1)},Je=[],Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"artist-container-outer"},[r("div",{staticClass:"artist-container-inner"},[r("a",{staticClass:"artist-art-link",attrs:{href:e.artist.external_urls.spotify}},[r("div",{staticClass:"artist-art",style:{"background-image":"url("+e.artist.images[0].url+")"}})]),r("p",{staticClass:"artist-name"},[e._v(" "+e._s(e.artist.name)+" ")])])])},Ze=[],Ke=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(a["a"]);l["a"]([Object(p["b"])()],Ke.prototype,"artist",void 0),Ke=l["a"]([Object(p["a"])({})],Ke);var Xe=Ke,et=Xe,tt=(r("efdc"),Object(v["a"])(et,Qe,Ze,!1,null,"bffc8444",null)),rt=tt.exports,at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"select-label-pair"},[r("label",{attrs:{for:"time-period"}},[e._v(" Learning From Your Favorite Artists of ")]),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],attrs:{id:"time-period"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"short"}},[e._v(" this Month ")]),r("option",{attrs:{value:"medium"}},[e._v(" the Last Six Months ")]),r("option",{attrs:{value:"long"}},[e._v(" All Time ")])])])])},nt=[],st=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.selected=e.$store.getters["artists/bucket"],e}return Object(u["a"])(t,e),Object(F["a"])(t,[{key:"newTimeRangeSelected",value:function(e){this.$store.commit("artists/setBucket",e)}}]),t}(p["c"]);l["a"]([Object(p["d"])("selected")],st.prototype,"newTimeRangeSelected",null),st=l["a"]([Object(p["a"])({})],st);var it=st,ot=it,ct=(r("4403"),Object(v["a"])(ot,at,nt,!1,null,"01a9be53",null)),ut=ct.exports;function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(r,!0).forEach((function(t){Object(z["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var dt=Object(R["a"])("artists"),ft=dt.mapState,mt=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(F["a"])(t,[{key:"artists",get:function(){return this.$store.getters["artists/".concat(this.bucket)]}}]),t}(a["a"]);mt=l["a"]([Object(p["a"])({components:{ArtistDisplay:rt,TimeRange:ut},computed:pt({},ft(["bucket"]))})],mt);var bt=mt,ht=bt,vt=(r("6dcf"),Object(v["a"])(ht,He,Je,!1,null,"680ae13a",null)),yt=vt.exports,gt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ot=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[r("i",[e._v("μ")]),e._v("Critic ")])}],wt=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);wt=l["a"]([Object(p["a"])({})],wt);var _t=wt,jt=_t,kt=(r("de90"),Object(v["a"])(jt,gt,Ot,!1,null,"9de8176a",null)),At=kt.exports,xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("LoadingAnimation"),r("h2",{staticClass:"status"},[e._v(" "+e._s(e.status)+" ")])],1)},Rt=[],Et=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);l["a"]([Object(p["b"])(String)],Et.prototype,"status",void 0),Et=l["a"]([Object(p["a"])({components:{LoadingAnimation:Ge}})],Et);var St=Et,Ct=St,Mt=(r("74a9"),Object(v["a"])(Ct,xt,Rt,!1,null,"fb44139c",null)),Pt=Mt.exports;function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(r,!0).forEach((function(t){Object(z["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $t,Nt=Object(R["a"])("artists"),It=Nt.mapState;(function(e){e["loadAlbums"]="importing albums",e["encodeArtists"]="learning about artists",e["learnTaste"]="learning your taste",e["rateAlbums"]="calculating album scores",e["loadSpotifyAlbums"]="loading favorite albums",e["sortAlbums"]="sorting albums",e["complete"]="completed"})($t||($t={}));var Lt=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.albums=[],e.albumsOnPage=0,e.loadingMoreAlbums=!0,e.switchedAlbumFiles=!1,e.status=$t.loadAlbums,e.unsubscribe=function(){},e}return Object(u["a"])(t,e),Object(F["a"])(t,[{key:"destroyed",value:function(){this.unsubscribe()}},{key:"mounted",value:function(){var e=this;this.$store.commit("reset"),this.$store.commit("albums/reset"),this.$store.commit("artists/reset"),this.$store.dispatch("albums/fetch"),this.$store.dispatch("spotify/requestArtists","short"),this.$store.dispatch("spotify/requestArtists","medium"),this.$store.dispatch("spotify/requestArtists","long"),this.unsubscribe=this.$store.subscribe((function(t){switch(t.type){case"artists/setArtists":t.payload.timeRange===e.bucket&&(e.status=$t.encodeArtists);break;case"artists/setEncodings":t.payload.timeRange===e.bucket&&(e.status=$t.learnTaste,e.$store.dispatch("artists/learnTaste"));break;case"artists/setBucket":e.status=$t.learnTaste,e.$store.dispatch("artists/learnTaste");break;case"albums/setAlbumFile":e.switchedAlbumFiles=!0,e.$store.dispatch("albums/fetch");break;case"albums/setSpotifyInfo":var r=e.$store.getters["albums/filteredAlbums"];e.albums=e.albums.concat(r.slice(e.albumsOnPage,e.albumsOnPage+20)),e.albumsOnPage+=20,e.status=$t.complete,e.loadingMoreAlbums=!1;break;case"albums/setPopularity":case"albums/setReleaseDecade":case"albums/setReception":case"albums/setScores":case"albums/setSortOrder":e.status=$t.loadSpotifyAlbums,e.albums=[],e.albumsOnPage=0,e.$store.commit("albums/sort"),e.$store.dispatch("spotify/requestAlbums",{start:0,count:20});break;case"albums/setAlbums":if(!e.switchedAlbumFiles)break;e.switchedAlbumFiles=!1,e.status=$t.rateAlbums,e.$store.dispatch("albums/rate");break;case"setTasteModels":e.status=$t.rateAlbums,e.$store.dispatch("albums/rate");break;default:break}})),window.onscroll=this.scroll}},{key:"scroll",value:function(){var e=document.querySelector(".loading-more-albums-animation");if(null!=e&&!this.loadingMoreAlbums){var t=window.pageYOffset+window.innerHeight,r=e.offsetTop-500;t>=r&&(this.loadingMoreAlbums=!0,this.$store.dispatch("spotify/requestAlbums",{start:this.albumsOnPage,count:20}))}}},{key:"loading",get:function(){return this.status!==$t.complete}}]),t}(a["a"]);Lt=l["a"]([Object(p["a"])({components:{AlbumGallery:Ve,ArtistGallery:yt,Loading:Pt,SmallLogo:At},computed:Dt({},It(["bucket"]))})],Lt);var Ft=Lt,qt=Ft,Ut=(r("7cfa"),Object(v["a"])(qt,ye,ge,!1,null,"5920ac86",null)),Gt=Ut.exports,Yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("See it in action.")]),r("a",{attrs:{href:e.authUrl}},[e._v("Log in with Spotify")])])},Bt=[];function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(r,!0).forEach((function(t){Object(z["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Vt=Object(R["a"])("spotify"),Ht=Vt.mapGetters,Jt=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(a["a"]);Jt=l["a"]([Object(p["a"])({computed:Wt({},Ht(["authUrl"]))})],Jt);var Qt=Jt,Zt=Qt,Kt=(r("0703"),Object(v["a"])(Zt,Yt,Bt,!1,null,"9bc940fa",null)),Xt=Kt.exports;function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(r,!0).forEach((function(t){Object(z["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rr=Object(R["a"])("spotify"),ar=rr.mapGetters,nr=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);nr=l["a"]([Object(p["a"])({components:{Greeting:ve,Recommend:Gt,SpotifyLogin:Xt},computed:tr({},ar(["apiIsActive"]))})],nr);var sr=nr,ir=sr,or=Object(v["a"])(ir,ue,le,!1,null,null,null),cr=or.exports,ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("SmallLogo"),e._m(0)],1)},lr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about-content"},[r("h1",{staticClass:"about-header",attrs:{id:"approach"}},[e._v(" Approach ")]),r("p",[e._v(" μCritic imagines "),r("i",[e._v("you")]),e._v(" as a music critic. ")]),r("p",[e._v(" At the heart of μCritic is an enormous quantity of data scraped from "),r("a",{attrs:{href:"https://rateyourmusic.com/"}},[e._v("Rate Your Music")]),e._v(", a website where passionate amateur music critics rate albums on a scale of 0 - 5. μCritic has analyzed hundreds of thousands of album reviews, learning the unique music tastes belonging to hundreds of Rate Your Music users. Then, it explored the relationship between the music tastes and favorite artists of each user. ")]),r("p",[e._v(" To recommend albums for new users, μCritic reverses this process. When a user logs in with Spotify, their 5 favorite artists are fed into the system. μCritic uses these artists to construct the user’s music taste, as if they were a critic from Rate Your Music. This taste is applied to a large set of albums, generating a numeric rating for each. The albums are sorted according to these ratings, and presented as recommendations. ")]),r("hr"),r("h1",{staticClass:"about-header"},[e._v(" Dataset ")]),r("p",[e._v(" μCritic is built on a new dataset aggregated specifically for the project. A custom web scraper was built to crawl Rate Your Music and save relational music data into a local database. Spotify IDs for each of the scraped albums/artists were mapped via the "),r("a",{attrs:{href:"https://developer.spotify.com/documentation/web-api/reference/search/search/"}},[e._v("Spotify API search endpoint")]),e._v(" and used for further data retrieval. The final training dataset consists of roughly "),r("ul",[r("li",[e._v("200 users")]),r("li",[e._v("40,000 artists")]),r("li",[e._v("150,000 albums")]),r("li",[e._v("300,000 user reviews")])])]),r("p",{staticClass:"footnote"},[e._v(" *The legality of web scraping has been repeatedly upheld in court. Furthermore, μCritic's use of the data falls under fair use. ")]),r("hr"),r("h1",{staticClass:"about-header",attrs:{id:"limitations"}},[e._v(" Limitations ")]),r("h2",[e._v(" Dataset ")]),r("p",[e._v(" The model is severely handicapped by the small number of analyzed critics (202). While scraping RYM, only users with at least 5 \"favorite artist\" entries and 10 albums reviews were collected. The artist requirement disqualified hundreds of prolific userful reviewers from the dataset. In a future version of μCritic, it may be useful to infer a user's favorite artists from their reviews (if not already explicitly listed in the user's profile). This would increase training set size and possibly result in better, more diverse results. ")]),r("h2",[e._v(" User Expectations ")]),r("p",[e._v(" The paradigm of μCritic's album recommendation system is fundamentally at odds with user expectations. Unlike other music recommendation systems, μCritic does not attempt to produce results similar to music that a user already enjoys. Instead, it is an "),r("em",[e._v("aspirational")]),e._v(" recommendation system, generalizing a user's favorite artists to music as a whole. ")]),r("h2",[e._v(" Accessibility ")]),r("p",[e._v(" Music reviewers are very intentional about their music taste. These individuals generally listen to large bodies of work and grow to enjoy music that can be harsh, abrasive, or just plain boring to many audiences. Such albums can attain widespread critical praise while remaining downright unpleasant to the average listener. Some examples of such music include "),r("a",{attrs:{href:"https://rateyourmusic.com/release/album/my-bloody-valentine/loveless/"}},[e._v("Loveless")]),e._v(" and "),r("a",{attrs:{href:"https://rateyourmusic.com/release/album/godspeed-you-black-emperor/lift-yr-skinny-fists-like-antennas-to-heaven/"}},[e._v("Lift Yr. Skinny Fists Like Antennas to Heaven!")]),e._v(", both of which land within the top 15 highest-rated albums of all time on RYM. By recommending albums with universal acclaim but low accessibility, μCritic is likely to alienate many users. ")]),r("hr"),r("h1",{staticClass:"about-header",attrs:{id:"neural-network"}},[e._v(" Neural Network ")]),r("p",{staticClass:"subheading-link"},[r("a",{attrs:{href:"https://i.imgur.com/wHM4wJa.jpg"}},[e._v("master diagram")])]),r("h2",[e._v(" Model 1 - "),r("a",{attrs:{href:"https://i.imgur.com/JMjUQoZ.jpg"}},[e._v("diagram")])]),r("p",[r("ul",[r("li",[e._v("Type: Deep Belief Network")]),r("li",[e._v("Input: Artist Data (from Spotify API & RYM Scraper)")]),r("li",[e._v("Output: Latent Artist Representation")]),r("li",[e._v("Internal Models")]),r("ul",[r("li",[e._v("a: Autoencoder")]),r("li",[e._v("b: Recurrent Autoencoder")]),r("li",[e._v("c: Autoencoder")])])])]),r("h2",[e._v(" Model 2 - "),r("a",{attrs:{href:"https://i.imgur.com/qJWVhWx.jpg"}},[e._v("diagram")])]),r("p",[r("ul",[r("li",[e._v("Type: Deep Belief Network")]),r("li",[e._v("Input: Album Data (from Spotify API)")]),r("li",[e._v("Output: Latent Album Representation")]),r("li",[e._v("Internal Models")]),r("ul",[r("li",[e._v("a: Autoencoder")]),r("li",[e._v("b: Recurrent Autoencoder")]),r("li",[e._v("c: Autoencoder")])])])]),r("h2",[e._v(" Model 3 ")]),r("p",[r("ul",[r("li",[e._v("Type: Perceptron")]),r("li",[e._v("Input: Latent Album Representation")]),r("li",[e._v("Output: Album Score")])])]),r("h2",[e._v(" Model 4 ")]),r("p",[r("ul",[r("li",[e._v("Type: Recurrent Autoencoder")]),r("li",[e._v("Input: 5 Outputs of "),r("b",[e._v("Model 2")])]),r("li",[e._v("Output: Latent Artist Representations")])])]),r("h2",[e._v(" Model 5 ")]),r("p",[r("ul",[r("li",[e._v("Type: Vec2Vec Neural Network")]),r("li",[e._v("Input: Output of "),r("b",[e._v("Model 4")])]),r("li",[e._v("Output: Weights for "),r("b",[e._v("Model 3")]),e._v(" (music taste)")])])]),r("p",{staticClass:"footnote"},[e._v(" *Testing and validation datasets withheld for all models during training. For metric integrity, models have not yet been evaluated using test sets, and will not be until μCritic has a stable release. Validation sets were used during training to fine-tune hyperparameters. ")]),r("hr"),r("h1",{staticClass:"about-header",attrs:{id:"tooling"}},[e._v(" Tooling ")]),r("h2",[e._v(" Web Scraping & Data Handling ")]),r("p",[r("ul",[r("li",[e._v("Language: Typescript")]),r("li",[e._v("Platform: Node.js")]),r("li",[e._v("Database: PostgreSQL, via "),r("a",{attrs:{href:"https://typeorm.io/"}},[e._v("TypeORM")])]),r("li",[e._v("Caching: Redis")]),r("li",[e._v("Scraping/Parsing: "),r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic/tree/master/src"}},[e._v("Fully Custom")])]),r("li",[e._v("Proxy Management: "),r("a",{attrs:{href:"https://www.scraperapi.com/"}},[e._v("ScraperApi")])])])]),r("h2",[e._v(" Machine Learning ")]),r("p",[r("ul",[r("li",[e._v("Languages")]),r("ul",[r("li",[e._v("Python (modeling)")]),r("li",[e._v("TypeScript (data pipeline)")])]),r("li",[e._v("Libraries")]),r("ul",[r("li",[e._v("Tensorflow 2.0")]),r("li",[e._v("Tensorflow.js")]),r("li",[e._v("Numpy")])])])]),r("h2",[e._v(" Web App ")]),r("p",[r("ul",[r("li",[e._v("Language: Typescript")]),r("li",[e._v("Framework: Vue.js")]),r("li",[e._v("State Management: Vuex")]),r("li",[e._v("ML: Tensorflow.js")]),r("li",[e._v("Bundler: webpack")]),r("li",[e._v("Deployment: Github Pages")])])]),r("hr"),r("h1",{staticClass:"about-header",attrs:{id:"repositories"}},[e._v(" Repositories ")]),r("h2",[r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic"}},[e._v("Data & Model")])]),r("h2",[r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic_App"}},[e._v("Web App")])])])}],pr=function(e){function t(){return Object(i["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(a["a"]);pr=l["a"]([Object(p["a"])({components:{SmallLogo:At}})],pr);var dr=pr,fr=dr,mr=(r("1bc4"),Object(v["a"])(fr,ur,lr,!1,null,"3801a470",null)),br=mr.exports,hr=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},vr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Can't find page! (404)")])])}],yr={},gr=Object(v["a"])(yr,hr,vr,!1,null,null,null),Or=gr.exports,wr=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},_r=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Something went wrong... (500)")])])}],jr={},kr=Object(v["a"])(jr,wr,_r,!1,null,null,null),Ar=kr.exports;a["a"].use(x["a"]);var xr=new x["a"]({routes:[{path:"/",name:"run",component:cr},{path:"/about",name:"about",component:br},{path:"/404",name:"notFound",component:Or},{path:"/500",name:"error",component:Ar}]});xr.beforeEach((function(e,t,r){try{0===e.matched.length&&(ce.dispatch("spotify/initializeApi",e.fullPath),r("/")),r()}catch(a){ce.commit("logError",{location:"page routing",error:a}),r("/500")}}));var Rr=xr;a["a"].config.productionTip=!1,new a["a"]({router:Rr,store:ce,render:function(e){return e(A)}}).$mount("#app")},de90:function(e,t,r){"use strict";var a=r("c75e"),n=r.n(a);n.a},efdc:function(e,t,r){"use strict";var a=r("2bb7"),n=r.n(a);n.a},fcdd:function(e,t,r){"use strict";var a=r("08f1"),n=r.n(a);n.a}});
//# sourceMappingURL=app.46eb99fc.js.map