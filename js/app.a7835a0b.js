(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],p=0,f=[];p<o.length;p++)s=o[p],a[s]&&f.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/mucritic-web/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"034f":function(e,t,r){"use strict";var n=r("64a9"),a=r.n(n);a.a},1:function(e,t){},10:function(e,t){},11:function(e,t){},2:function(e,t){},2895:function(e,t,r){},3:function(e,t){},"3be9":function(e,t,r){"use strict";var n=r("2895"),a=r.n(n);a.a},4:function(e,t){},"438f":function(e,t,r){"use strict";var n=r("e5bd"),a=r.n(n);a.a},5:function(e,t){},6:function(e,t){},"637c":function(e,t,r){},"64a9":function(e,t,r){},7:function(e,t){},8:function(e,t){},9:function(e,t){},cd49:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v("\n            Generate Your Taste\n        ")]),e._v(" |\n        "),r("router-link",{attrs:{to:"/about"}},[e._v("\n            How it Works\n        ")]),e._v(" |\n        "),r("router-link",{attrs:{to:"/contact"}},[e._v("\n            Get in Touch\n        ")]),e._v(" |\n        "),r("a",{attrs:{href:"https://github.com/MichaelDarr/MuCritic-2.0"}},[e._v("Source Code")])],1),r("router-view")],1)},i=[],s=(r("034f"),r("2877")),o={},c=Object(s["a"])(o,a,i,!1,null,null,null),u=c.exports,l=r("8c4f"),p=r("2f62"),f=(r("c5f6"),r("28a5"),r("96cf"),r("3b8d")),h=r("0b53"),m=r("30dc"),d=r.n(m),b={fetch:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,new Promise(function(e,t){d()("https://michaeldarr.github.io/mucritic-web/album_data.csv",function(r,n,a){null!=r?t(new Error("album data failed to load: ".concat(r))):e(a)})});case 3:n=e.sent,a=n.split("\n"),a.shift(),i=a.map(function(e){var t=e.split(",");return{spotifyId:t[0],popularity:Number(t[1]),rymOverallRank:Number(t[2]),rymRating:Number(t[3]),rymRatingCount:Number(t[4]),releaseYear:Number(t[5]),artistActive:Number(t[6]),artistDiscographySize:Number(t[7]),artistMemberCount:Number(t[8]),artistPopularity:Number(t[9]),encoding:[Number(t[10]),Number(t[11]),Number(t[12]),Number(t[13]),Number(t[14]),Number(t[15]),Number(t[16]),Number(t[17]),Number(t[18]),Number(t[19]),Number(t[20]),Number(t[21]),Number(t[22]),Number(t[23]),Number(t[24]),Number(t[25])],userScore:null,imageUrl:null,name:null,artist:null}}),r("setAlbums",i);case 8:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),rate:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,o,c,u,l,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,n=t.rootState,a=t.state,null!=n.tasteModel){e.next=3;break}throw new Error("Tried to rate albums before model creation");case 3:if(null!=a.albums){e.next=5;break}throw new Error("No albums to rate");case 5:i=n.tasteModel,s=a.albums,o=s.map(function(e){return e.encoding}),c=h["f"](o,[o.length,16]),u=i.predict(c),l=u.arraySync(),p=l.map(function(e){return e[0]}),r("setScores",p);case 13:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},v=(r("55dd"),r("7f7f"),r("ac6a"),{setAlbums:function(e,t){e.albums=t},setScores:function(e,t){t.forEach(function(t,r){e.albums[r].userScore=t})},setSpotifyInfo:function(e,t){t.spotifyAlbums.forEach(function(r,n){var a=500,i={height:819,url:"https://i.imgur.com/otLb7Vf.png",width:819};r.images.forEach(function(e){("https://i.imgur.com/otLb7Vf.png"===i.url||Math.abs(i.width)-a>Math.abs(e.width-a))&&(i=e)}),e.albums[n+t.start].imageUrl=i.url,e.albums[n+t.start].name=r.name,e.albums[n+t.start].artist=r.artists[0].name})},sort:function(e){e.albums.sort(function(e,t){return null==t.userScore||null==e.userScore?-1:t.userScore-e.userScore})}}),g={albums:function(e){return e.albums},loaded:function(e){return 0!==e.albums.length},scored:function(e){return 0!==e.albums.length&&null!=e.albums[0].userScore}},y={albums:[]},w=!0,k={namespaced:w,state:y,actions:b,getters:g,mutations:v},O=(r("5df3"),r("d225")),j=r("b0b4"),x=r("768b"),R=function(){function e(){Object(O["a"])(this,e),this.artistEncoderInstance={model:null,path:"models/artistEncoder/model.json"},this.favoriteArtistsEncoderInstance={model:null,path:"models/favoriteArtistsEncoder/model.json"},this.tasteMapperInstance={model:null,path:"models/taste/model.json"},this.trackEncoderInstance={model:null,path:"models/trackEncoder/model.json"},this.trackSequenceEncoderInstance={model:null,path:"models/trackSequenceEncoder/model.json"}}return Object(j["a"])(e,[{key:"artistEncoder",value:function(){return e.loadModel(this.artistEncoderInstance)}},{key:"favoriteArtistsEncoder",value:function(){return e.loadModel(this.favoriteArtistsEncoderInstance)}},{key:"tasteMapper",value:function(){return e.loadModel(this.tasteMapperInstance)}},{key:"trackEncoder",value:function(){return e.loadModel(this.trackEncoderInstance)}},{key:"trackSequenceEncoder",value:function(){return e.loadModel(this.trackSequenceEncoderInstance)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"loadModel",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.model){e.next=4;break}return e.next=3,h["b"](t.path);case 3:t.model=e.sent;case 4:return e.abrupt("return",t.model);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),E=function(){function e(){Object(O["a"])(this,e)}return Object(j["a"])(e,null,[{key:"artist",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=R.getInstance(),e.next=3,r.artistEncoder();case 3:return n=e.sent,a=h["e"](t).as2D(1,33),i=n.predict(a),e.next=8,i.array();case 8:return s=e.sent,e.abrupt("return",s[0]);case 10:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"taste",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length<5)){e.next=2;break}throw new Error("taste encoder must be passed 5 artists");case 2:return r=R.getInstance(),e.next=5,r.favoriteArtistsEncoder();case 5:return n=e.sent,e.next=8,r.tasteMapper();case 8:return a=e.sent,i=h["e"](t.slice(0,5)).as3D(1,5,16),s=n.predict(i),o=a.predict(s),o=o.reshape([16,1]),o=o.mul(h["c"](-1)),c=h["d"](),c.add(h["a"].dense({inputShape:[16],name:"perceptron",units:1,useBias:!1,weights:[o]})),e.abrupt("return",c);case 17:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"track",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,s,o,c,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=[r.acousticness,r.danceability,t.duration_ms/6e5,r.energy,t.explicit?1:0,r.instrumentalness,r.liveness,Math.max(-1*r.loudness+10,0)/70,r.mode,t.popularity/100,r.speechiness,r.tempo/200,r.time_signature/8,t.track_number/10,r.valence],a=R.getInstance(),e.next=4,a.trackEncoder();case 4:return i=e.sent,s=h["e"](n).as2D(1,15),o=i.predict(s),e.next=9,o.array();case 9:return c=e.sent,u=Object(x["a"])(c,1),l=u[0],e.abrupt("return",l);case 13:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"trackSequence",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=R.getInstance(),e.next=3,n.trackSequenceEncoder();case 3:return a=e.sent,i=h["e"](t).as3D(1,5,13),s=a.predict(i),e.next=8,s.array();case 8:return o=e.sent,e.abrupt("return",[r/100].concat(o[0]));case 10:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),_=function(){function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;Object(O["a"])(this,e),this.spotifyId=t,this.artistPopularity=r,this.spotifyApi=n,this.trackCount=a,this.encodedTracks=[]}return Object(j["a"])(e,[{key:"encodeArtist",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.artistAggregation){e.next=2;break}throw new Error("Cannot encode null artist");case 2:return e.next=4,E.artist(this.artistAggregation);case 4:this.encodedArtist=e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"encodeTrackSequence",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(5===this.encodedTracks.length){e.next=2;break}throw new Error("track sequence encoder found ".concat(this.encodedTracks.length," tracks (should be 5)"));case 2:return e.next=4,E.trackSequence(this.encodedTracks,this.artistPopularity);case 4:this.artistAggregation=e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"encodeTracks",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.spotifyResponse&&null!=this.spotifyFeaturesResponse){e.next=2;break}throw new Error("Tried to encode track before receiving all info");case 2:return e.next=4,Promise.all(this.spotifyResponse.tracks.map(function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.spotifyFeaturesResponse){e.next=2;break}throw new Error("Tried to encode track before receiving all info");case 2:return e.abrupt("return",E.track(r,t.spotifyFeaturesResponse.audio_features[n]));case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 4:this.encodedTracks=e.sent;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestTracks",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.spotifyApi.getArtistTopTracks(this.spotifyId);case 2:if(this.spotifyResponse=e.sent,!(this.spotifyResponse.tracks.length<this.trackCount)){e.next=5;break}throw new Error("Artist scraper found less than ".concat(this.trackCount," top tracks"));case 5:return this.spotifyResponse.tracks=this.spotifyResponse.tracks.slice(0,this.trackCount),t=this.spotifyResponse.tracks.map(function(e){return e.id}),e.next=9,this.spotifyApi.getBatch(t,"audio-features");case 9:this.spotifyFeaturesResponse=e.sent;case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getEncodedArtist",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.requestTracks();case 2:return e.next=4,this.encodeTracks();case 4:return e.next=6,this.encodeTrackSequence();case 6:return e.next=8,this.encodeArtist();case 8:if(null!=this.encodedArtist){e.next=10;break}throw new Error("Failed to encode artist: ".concat(this.spotifyId));case 10:return e.abrupt("return",this.encodedArtist);case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),e}(),S={encode:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.state,i=t.rootGetters,s=i["spotify/api"],null!=s){e.next=4;break}throw new Error("cannot encode artists, Spotify API is uninitiailized");case 4:return e.next=6,Promise.all(a[r].map(function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=new _(t.id,t.popularity,s),e.abrupt("return",r.getEncodedArtist());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 6:o=e.sent,n("setEncodings",{encodedArtists:o,timeRange:r});case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),learnTaste:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.state,i=a[r].slice(0,5),s=i.map(function(e){var t=e.encoded;if(null==t)throw new Error("Tried to learn taste from unencoded artist.");return t}),e.next=5,E.taste(s);case 5:o=e.sent,n("setTasteModel",o,{root:!0});case 7:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},A=(r("8e6e"),r("456d"),r("bd86"));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(r,!0).forEach(function(t){Object(A["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var q,M={setArtists:function(e,t){var r=t.artists.map(function(e){return P({encoded:null},e)});e[t.bucket]=r},setEncodings:function(e,t){t.encodedArtists.forEach(function(r,n){e[t.timeRange][n].encoded=r})}},N={loaded:function(e){return{short:e.short.length>0,medium:e.medium.length>0,long:e.long.length>0}},encoded:function(e){var t={short:!1,medium:!1,long:!1};return e.short.length>0&&null!=e.short[0].encoded&&(t.short=!0),e.medium.length>0&&null!=e.medium[0].encoded&&(t.medium=!0),e.long.length>0&&null!=e.long[0].encoded&&(t.long=!0),t}},I={short:[],medium:[],long:[]},$=!0,C={namespaced:$,state:I,actions:S,getters:N,mutations:M},D={api:function(e){return e.api},authUrl:function(e){var t=e.baseUrl;return t+="?client_id=".concat(e.clientId),t+="&response_type=".concat(e.responseType),t+="&redirect_uri=".concat(e.redirectUri),t+="&scope=".concat(e.scope),t}};(function(e){e["short"]="short_term",e["medium"]="medium_term",e["long"]="long_term"})(q||(q={}));r("ee1d");var G=function(){function e(t,r){Object(O["a"])(this,e);var n="",a=0,i=t.substring(1).split("&");if(i.forEach(function(e){var t=e.split("=");if(2===t.length){var i=Object(x["a"])(t,2),s=i[0],o=i[1];switch(s){case"access_token":n=o;break;case"expires_in":if(Number.isNaN(Number(o)))throw new Error("expiration value non-numeric: ".concat(o));a=Number(o);break;case"token_type":if("Bearer"!==o)throw new Error("non-Bearer token recieved: ".concat(o));break;default:r("miscLog",{location:"Spotify token retrieval",message:"unexpected parameter receieved:\n".concat(s,": ").concat(o)})}}}),null==n||""===n)throw new Error("failed to retrieve access token");if(null==a||0===a)throw new Error("failed to retrieve access token expiration");this.accessToken=n,this.expirationTimestamp=Date.now()+1e3*a}return Object(j["a"])(e,[{key:"getAlbumTracks",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:50,n="https://api.spotify.com/v1/albums/".concat(t,"/tracks?limit=").concat(r),e.abrupt("return",this.spotifyRequest(n,"GET"));case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getArtist",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="https://api.spotify.com/v1/artists/".concat(t),e.abrupt("return",this.spotifyRequest(r,"GET"));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getArtistTopTracks",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"US",n="https://api.spotify.com/v1/artists/".concat(t,"/top-tracks?country=").concat(r),e.abrupt("return",this.spotifyRequest(n,"GET"));case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBatch",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t.join(","):t,a="https://api.spotify.com/v1/".concat(r,"?ids=").concat(n),e.abrupt("return",this.spotifyRequest(a,"GET"));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getGenreSeeds",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="https://api.spotify.com/v1/recommendations/available-genre-seeds",e.abrupt("return",this.spotifyRequest(t,"GET"));case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getTrackAudioFeatures",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="https://api.spotify.com/v1/audio-features/".concat(t),e.abrupt("return",this.spotifyRequest(r,"GET"));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserTopMusic",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,i,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"medium_term",n=s.length>2&&void 0!==s[2]?s[2]:20,a=s.length>3&&void 0!==s[3]?s[3]:0,i="https://api.spotify.com/v1/me/top/".concat(t,"?limit=").concat(n,"&offset=").concat(a,"&time_range=").concat(r),e.abrupt("return",this.spotifyRequest(i,"GET"));case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r,n){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="https://api.spotify.com/v1/search?q=".concat(t,"&type=").concat(r,"&limit=").concat(n),e.abrupt("return",this.spotifyRequest(a,"GET"));case 2:case"end":return e.stop()}},e,this)}));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"spotifyRequest",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(Date.now()>this.expirationTimestamp)){e.next=2;break}throw new Error("Spotify Token Expired");case 2:return e.abrupt("return",new Promise(function(e,a){var i={url:t,method:r,json:!0,headers:{Authorization:"Bearer ".concat(n.accessToken)}};d()(i,function(i,s,o){if(null!=i)a(new Error("request failed for ".concat(t,": ").concat(i)));else if(null==o)a(new Error("request failed for ".concat(t,": body was null")));else if(null!=o.error&&429===o.error.status){var c=n;setTimeout(function(){e(c.spotifyRequest(t,r))},1e3*s.headers["Retry-After"])}else e(o)})}));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),L={initializeApi:function(e,t){var r=e.commit;try{var n=new G(t,r);r("storeApi",n)}catch(a){r("logError",{location:"Spotify token retrieval",message:a})}},requestArtists:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.dispatch,i=t.state,null==i.api){e.next=7;break}return e.next=4,i.api.getUserTopMusic("artists",q[r],5);case 4:s=e.sent,n("artists/setArtists",{artists:s.items,bucket:r},{root:!0}),a("artists/encode",r,{root:!0});case 7:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestAlbums:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,a=t.state,i=t.rootGetters,null==a.api){e.next=8;break}return s=i["albums/albums"],o=s.slice(r.start,r.start+r.count).map(function(e){return e.spotifyId}),e.next=6,a.api.getBatch(o,"albums");case 6:c=e.sent,n("albums/setSpotifyInfo",{start:r.start,spotifyAlbums:c.albums},{root:!0});case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},U={storeApi:function(e,t){e.api=t}},B={baseUrl:"https://accounts.spotify.com/authorize",clientId:"a01304edb42448d1aa31c3b255400130",redirectUri:"https://michaeldarr.github.io/mucritic-web/",responseType:"token",scope:"user-top-read",api:null},F=!0,z={namespaced:F,state:B,getters:D,actions:L,mutations:U};n["a"].use(p["b"]);var H={state:{errorLog:[],miscLog:[],tasteModel:null},modules:{albums:k,artists:C,spotify:z},mutations:{logError:function(e,t){e.errorLog.push(t)},logMisc:function(e,t){e.miscLog.push(t)},setTasteModel:function(e,t){e.tasteModel=t}}},J=new p["b"].Store(H),V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.apiIsLoaded?r("div",[r("Learning")],1):r("div",[r("Greeting"),r("SpotifyLogin")],1)},Y=[],W=r("308d"),K=r("6bb5"),Q=r("4e2b"),X=r("9ab4"),Z=r("60a3"),ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),r("div",{staticClass:"content"},e._l(e.albums,function(t){return r("div",{key:t.spotifyId,staticClass:"album-container-outer"},[r("div",{staticClass:"album-container-inner"},[r("img",{staticClass:"album-art",attrs:{src:t.imageUrl}}),r("p",{staticClass:"album-name"},[e._v("\n                    "+e._s(t.name)+"\n                ")]),r("p",{staticClass:"artist-name"},[e._v("\n                    "+e._s(t.artist)+"\n                ")])])])}),0)])},te=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[r("i",[e._v("μ")]),e._v("Critic\n    ")])}],re=function(e){function t(){var e;return Object(O["a"])(this,t),e=Object(W["a"])(this,Object(K["a"])(t).apply(this,arguments)),e.albums=[],e}return Object(Q["a"])(t,e),Object(j["a"])(t,[{key:"mounted",value:function(){var e=this;this.$store.dispatch("albums/fetch"),this.$store.dispatch("spotify/requestArtists","short"),this.$store.dispatch("spotify/requestArtists","medium"),this.$store.dispatch("spotify/requestArtists","long");var t=this.$store.subscribe(function(r){switch(r.type){case"artists/setEncodings":"medium"===r.payload.timeRange&&e.$store.dispatch("artists/learnTaste","medium");break;case"albums/setScores":e.$store.commit("albums/sort"),e.$store.dispatch("spotify/requestAlbums",{start:0,count:20}),t();break;case"setTasteModel":e.$store.dispatch("albums/rate");break;default:break}});this.$store.watch(function(e,t){return t["albums/albums"]},function(t){e.albums=t.slice(0,20)})}}]),t}(n["a"]);re=X["a"]([Object(Z["a"])({})],re);var ne=re,ae=ne,ie=(r("cf29"),Object(s["a"])(ae,ee,te,!1,null,"29fcee85",null)),se=ie.exports,oe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ce=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[r("i",[e._v("μ")]),e._v("Critic\n    ")]),r("h2",{staticClass:"subheadding"},[r("span",{staticClass:"sub-1"},[e._v("\n            learning your music taste with\n        ")]),r("br"),r("span",{staticClass:"sub-2"},[e._v("\n            deep neural networks\n        ")])])])}],ue=function(e){function t(){return Object(O["a"])(this,t),Object(W["a"])(this,Object(K["a"])(t).apply(this,arguments))}return Object(Q["a"])(t,e),t}(Z["b"]);ue=X["a"]([Object(Z["a"])({})],ue);var le=ue,pe=le,fe=(r("3be9"),Object(s["a"])(pe,oe,ce,!1,null,"0c0f15a0",null)),he=fe.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("See it in action.")]),r("a",{attrs:{href:e.authUrl}},[e._v("Log in with Spotify")])])},de=[];function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(r,!0).forEach(function(t){Object(A["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ge=Object(p["a"])("spotify"),ye=ge.mapGetters,we=function(e){function t(){return Object(O["a"])(this,t),Object(W["a"])(this,Object(K["a"])(t).apply(this,arguments))}return Object(Q["a"])(t,e),t}(n["a"]);we=X["a"]([Object(Z["a"])({computed:ve({},ye(["authUrl"]))})],we);var ke=we,Oe=ke,je=(r("438f"),Object(s["a"])(Oe,me,de,!1,null,"55c9a4b6",null)),xe=je.exports;function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(r,!0).forEach(function(t){Object(A["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _e=Object(p["a"])("spotify"),Se=_e.mapState,Ae=function(e){function t(){return Object(O["a"])(this,t),Object(W["a"])(this,Object(K["a"])(t).apply(this,arguments))}return Object(Q["a"])(t,e),Object(j["a"])(t,[{key:"apiIsLoaded",get:function(){return null!=this.api}}]),t}(Z["b"]);Ae=X["a"]([Object(Z["a"])({components:{Learning:se,Greeting:he,SpotifyLogin:xe},computed:Ee({},Se(["api"]))})],Ae);var Te=Ae,Pe=Te,qe=Object(s["a"])(Pe,V,Y,!1,null,null,null),Me=qe.exports,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[e._v("About the model:")])},Ie=[],$e={},Ce=Object(s["a"])($e,Ne,Ie,!1,null,null,null),De=Ce.exports,Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[e._v("Hi, I'm Michael Darr.")])},Le=[],Ue={},Be=Object(s["a"])(Ue,Ge,Le,!1,null,null,null),Fe=Be.exports,ze=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},He=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Can't find page! (404)")])])}],Je={},Ve=Object(s["a"])(Je,ze,He,!1,null,null,null),Ye=Ve.exports,We=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ke=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Something went wrong... (500)")])])}],Qe={},Xe=Object(s["a"])(Qe,We,Ke,!1,null,null,null),Ze=Xe.exports;n["a"].use(l["a"]);var et=new l["a"]({routes:[{path:"/",name:"run",component:Me},{path:"/about",name:"about",component:De},{path:"/contact",name:"contact",component:Fe},{path:"/404",name:"notFound",component:Ye},{path:"/500",name:"error",component:Ze}]});et.beforeEach(function(e,t,r){try{0===e.matched.length&&(J.dispatch("spotify/initializeApi",e.fullPath),r("/")),r()}catch(n){J.commit("logError",{location:"page routing",error:n}),r("/500")}});var tt=et;n["a"].config.productionTip=!1,new n["a"]({router:tt,store:J,render:function(e){return e(u)}}).$mount("#app")},cf29:function(e,t,r){"use strict";var n=r("637c"),a=r.n(n);a.a},e5bd:function(e,t,r){}});
//# sourceMappingURL=app.a7835a0b.js.map